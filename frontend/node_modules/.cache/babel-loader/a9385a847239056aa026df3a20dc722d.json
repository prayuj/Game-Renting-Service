{"ast":null,"code":"import _defineProperty from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import Transaction from\"./transaction\";import LoadingSpinner from\"./loadingSpinner\";var Transactions=/*#__PURE__*/function(_Component){_inherits(Transactions,_Component);var _super=_createSuper(Transactions);function Transactions(props){var _this;_classCallCheck(this,Transactions);_this=_super.call(this,props);_this.state={transactions:[],filtered:[],ascendingCustomerName:true,ascendingGameName:true,ascendingDateIssue:true,ascendingDateReturn:true,customerNameSortButtonValue:\"Sort\",gameNameSortButtonValue:\"Sort\",dateIssueButtonValue:/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"),dateReturnButtonValue:\"Sort\",dateIssueFrom:\"\",dateIssueTo:\"\",dateReturnFrom:\"\",dateReturnTo:\"\",transactions_loaded:false};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.getTransactions=_this.getTransactions.bind(_assertThisInitialized(_this));_this.onClickForSort=_this.onClickForSort.bind(_assertThisInitialized(_this));_this.getIssueDates=_this.getIssueDates.bind(_assertThisInitialized(_this));_this.getReturnDates=_this.getReturnDates.bind(_assertThisInitialized(_this));return _this;}_createClass(Transactions,[{key:\"componentDidMount\",value:function componentDidMount(){this.getTransactions();}},{key:\"getTransactions\",value:function getTransactions(){var _this2=this;this.setState({dateIssueFrom:\"\",dateIssueTo:\"\",dateReturnFrom:\"\",dateReturnTo:\"\"});axios.get(\"https://prayuj-gamerent.herokuapp.com/transaction\").then(function(res){return _this2.setState({transactions:res.data,filtered:res.data,transactions_loaded:true});});}},{key:\"convertDate\",value:function convertDate(dates){var date=new Date(dates);var dd=String(date.getDate()).padStart(2,\"0\");var mm=String(date.getMonth()+1).padStart(2,\"0\");//January is 0!\nvar yyyy=date.getFullYear();var today=dd+\"/\"+mm+\"/\"+yyyy;return today;}},{key:\"handleChange\",value:function handleChange(e){// Variable to hold the original version of the list\nvar currentList=[];// Variable to hold the filtered list before putting into state\nvar newList=[];// If the search bar isn't empty\nif(e.target.value!==\"\"){//console.log(\"HERE 1\");\n// Assign the original list to currentList\ncurrentList=this.state.transactions;var firstList=[];var secondList=[];// Use .filter() to determine which items should be displayed\n// based on the search terms\nfirstList=currentList.filter(function(item){// change current item to lowercase\nvar lc=item.gameInfo.name.toLowerCase();// change search term to lowercase\nvar filter=e.target.value.toLowerCase();// check to see if the current list item includes the search term\n// If it does, it will be added to newList. Using lowercase eliminates\n// issues with capitalization in search terms and search content\nreturn lc.includes(filter);});secondList=currentList.filter(function(item){// change current item to lowercase\nvar lc=item.customerInfo.name.toLowerCase();// change search term to lowercase\nvar filter=e.target.value.toLowerCase();// check to see if the current list item includes the search term\n// If it does, it will be added to newList. Using lowercase eliminates\n// issues with capitalization in search terms and search content\nreturn lc.includes(filter);});newList=firstList.concat(secondList);//console.log(newList);\n}else{//console.log(\"HERE 2\");\n// If the search bar is empty, set newList to original task list\nnewList=this.state.transactions;}// Set the filtered state based on what our rules added to newList\nthis.setState({filtered:newList});}},{key:\"onClickForSort\",value:function onClickForSort(e){var _this3=this;if(e.target.value===\"Customer Name\"){var transactions=this.state.filtered;transactions.sort(function(a,b){var x=a.customerInfo.name.toLowerCase();var y=b.customerInfo.name.toLowerCase();if(_this3.state.ascendingCustomerName){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this3.state.ascendingCustomerName){if(x<y){return-1;}if(x>y){return 1;}return 0;}});var arrow=this.state.ascendingCustomerName?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:transactions,ascendingCustomerName:!this.state.ascendingCustomerName,customerNameSortButtonValue:arrow,gameNameSortButtonValue:\"Sort\",dateIssueButtonValue:\"Sort\",dateReturnButtonValue:\"Sort\"});}if(e.target.value===\"Game Name\"){var _transactions=this.state.filtered;_transactions.sort(function(a,b){var x=a.gameInfo.name.toLowerCase();var y=b.gameInfo.name.toLowerCase();if(_this3.state.ascendingGameName){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this3.state.ascendingGameName){if(x<y){return-1;}if(x>y){return 1;}return 0;}});var _arrow=this.state.ascendingGameName?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:_transactions,ascendingGameName:!this.state.ascendingGameName,gameNameSortButtonValue:_arrow,customerNameSortButtonValue:\"Sort\",dateIssueButtonValue:\"Sort\",dateReturnButtonValue:\"Sort\"});}if(e.target.value===\"Date Issue\"){var _transactions2=this.state.filtered;_transactions2.sort(function(a,b){var x=a.date_issue;var y=b.date_issue;if(_this3.state.ascendingDateIssue){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this3.state.ascendingDateIssue){if(x<y){return-1;}if(x>y){return 1;}return 0;}});var _arrow2=this.state.ascendingDateIssue?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:_transactions2,ascendingDateIssue:!this.state.ascendingDateIssue,dateIssueButtonValue:_arrow2,customerNameSortButtonValue:\"Sort\",gameNameSortButtonValue:\"Sort\",dateReturnButtonValue:\"Sort\"});}if(e.target.value===\"Date Return\"){var _transactions3=this.state.filtered;_transactions3.sort(function(a,b){if(_this3.state.ascendingDateReturn){if(a.return&&b.return){var x=a.date_return;var y=b.date_return;if(x<y){return 1;}if(x>y){return-1;}return 0;}else if(!a.return&&b.return){return 1;}else if(a.return&&!b.return){return-1;}else{var x=a.date_issue;var y=b.date_issue;if(x<y){return 1;}if(x>y){return-1;}return 0;}}if(!_this3.state.ascendingDateReturn){if(a.return&&b.return){var x=a.date_return;var y=b.date_return;if(x<y){return-1;}if(x>y){return 1;}return 0;}else if(!a.return&&b.return){return-1;}else if(a.return&&!b.return){return 1;}else{var x=a.date_issue;var y=b.date_issue;if(x<y){return-1;}if(x>y){return 1;}return 0;}}});var _arrow3=this.state.ascendingDateReturn?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState(_defineProperty({filtered:_transactions3,ascendingDateReturn:!this.state.ascendingDateReturn,dateReturnButtonValue:_arrow3,customerNameSortButtonValue:\"Sort\",gameNameSortButtonValue:\"Sort\"},\"gameNameSortButtonValue\",\"Sort\"));}}},{key:\"getIssueDates\",value:function getIssueDates(e){var _this4=this;e.preventDefault();if(e.target.from.value!==\"\"&&e.target.to.value!==\"\"){axios.get(\"https://prayuj-gamerent.herokuapp.com/transaction/dates/mode=issue&from=\"+e.target.from.value+\"&to=\"+e.target.to.value).then(function(res){return _this4.setState({transactions:res.data,filtered:res.data});});}}},{key:\"getReturnDates\",value:function getReturnDates(e){var _this5=this;e.preventDefault();if(e.target.from.value!==\"\"&&e.target.to.value!==\"\"){axios.get(\"https://prayuj-gamerent.herokuapp.com/transaction/dates/mode=return&from=\"+e.target.from.value+\"&to=\"+e.target.to.value).then(function(res){return _this5.setState({transactions:res.data,filtered:res.data});});}}},{key:\"getToday\",value:function getToday(){var date=new Date();var dd=String(date.getDate()).padStart(2,\"0\");var mm=String(date.getMonth()+1).padStart(2,\"0\");//January is 0!\nvar yyyy=date.getFullYear();return yyyy+\"-\"+mm+\"-\"+dd;}},{key:\"render\",value:function render(){var _this6=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search...\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.getIssueDates},\"Select Date of Issue\",/*#__PURE__*/React.createElement(\"input\",{name:\"from\",type:\"date\",value:this.state.dateIssueFrom,max:this.getToday(),onChange:function onChange(e){return _this6.setState({dateIssueFrom:e.target.value});}}),\"to\",/*#__PURE__*/React.createElement(\"input\",{name:\"to\",type:\"date\",value:this.state.dateIssueTo,min:this.state.dateIssueFrom,max:this.getToday(),onChange:function onChange(e){return _this6.setState({dateIssueTo:e.target.value});}}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn btn-info\",value:\"Get\"})),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.getReturnDates},\"Select Date of Return\",/*#__PURE__*/React.createElement(\"input\",{name:\"from\",type:\"date\",max:this.getToday(),value:this.state.dateReturnFrom,onChange:function onChange(e){return _this6.setState({dateReturnFrom:e.target.value});}}),\"to\",/*#__PURE__*/React.createElement(\"input\",{name:\"to\",type:\"date\",value:this.state.dateReturnTo,min:this.state.dateReturnFrom,max:this.getToday(),onChange:function onChange(e){return _this6.setState({dateReturnTo:e.target.value});}}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn btn-info\",value:\"Get\"})),/*#__PURE__*/React.createElement(\"input\",{type:\"button\",className:\"btn btn-primary\",value:\"Show all\",onClick:this.getTransactions}),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive-xl\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table\",style:{marginTop:20}},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:{paddingBottom:\"1.3%\"}},\"Sr\"),/*#__PURE__*/React.createElement(\"th\",{style:{paddingBottom:\"1.3%\"}},\"Transaction ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"Member Name\",\" \",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"Customer Name\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.customerNameSortButtonValue)),/*#__PURE__*/React.createElement(\"th\",null,\"Game Name\",\" \",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"Game Name\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.gameNameSortButtonValue)),/*#__PURE__*/React.createElement(\"th\",null,\"Date Issue\",\" \",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"Date Issue\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.dateIssueButtonValue)),/*#__PURE__*/React.createElement(\"th\",null,\"Date Return\",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"Date Return\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.dateReturnButtonValue)))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.transactions_loaded?this.state.filtered.map(function(transaction,index){return/*#__PURE__*/React.createElement(Transaction,{index:index+1,id:transaction._id,game_name:transaction.gameInfo.name,customer_name:transaction.customerInfo.name,date_issue:_this6.convertDate(transaction.date_issue),date_return:transaction.return?_this6.convertDate(transaction.date_return):\"Not Returned\"});}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"6\",style:{position:\"relative\",top:\"50%\",left:\"50%\"}},/*#__PURE__*/React.createElement(LoadingSpinner,null)))))));}}]);return Transactions;}(Component);export default Transactions;","map":{"version":3,"sources":["C:/Prayuj Folders/Game-Renting-Service/frontend/src/components/transactions.js"],"names":["React","Component","axios","Transaction","LoadingSpinner","Transactions","props","state","transactions","filtered","ascendingCustomerName","ascendingGameName","ascendingDateIssue","ascendingDateReturn","customerNameSortButtonValue","gameNameSortButtonValue","dateIssueButtonValue","dateReturnButtonValue","dateIssueFrom","dateIssueTo","dateReturnFrom","dateReturnTo","transactions_loaded","handleChange","bind","getTransactions","onClickForSort","getIssueDates","getReturnDates","setState","get","then","res","data","dates","date","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","today","e","currentList","newList","target","value","firstList","secondList","filter","item","lc","gameInfo","name","toLowerCase","includes","customerInfo","concat","sort","a","b","x","y","arrow","date_issue","return","date_return","preventDefault","from","to","getToday","marginTop","paddingBottom","map","transaction","index","_id","convertDate","position","top","left"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport Transaction from \"./transaction\";\r\nimport LoadingSpinner from \"./loadingSpinner\";\r\n\r\nclass Transactions extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      transactions: [],\r\n      filtered: [],\r\n      ascendingCustomerName: true,\r\n      ascendingGameName: true,\r\n      ascendingDateIssue: true,\r\n      ascendingDateReturn: true,\r\n      customerNameSortButtonValue: \"Sort\",\r\n      gameNameSortButtonValue: \"Sort\",\r\n      dateIssueButtonValue: <span>&darr;</span>,\r\n      dateReturnButtonValue: \"Sort\",\r\n      dateIssueFrom: \"\",\r\n      dateIssueTo: \"\",\r\n      dateReturnFrom: \"\",\r\n      dateReturnTo: \"\",\r\n      transactions_loaded: false,\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.getTransactions = this.getTransactions.bind(this);\r\n    this.onClickForSort = this.onClickForSort.bind(this);\r\n    this.getIssueDates = this.getIssueDates.bind(this);\r\n    this.getReturnDates = this.getReturnDates.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    this.getTransactions();\r\n  }\r\n  getTransactions() {\r\n    this.setState({\r\n      dateIssueFrom: \"\",\r\n      dateIssueTo: \"\",\r\n      dateReturnFrom: \"\",\r\n      dateReturnTo: \"\",\r\n    });\r\n    axios.get(\"https://prayuj-gamerent.herokuapp.com/transaction\").then((res) =>\r\n      this.setState({\r\n        transactions: res.data,\r\n        filtered: res.data,\r\n        transactions_loaded: true,\r\n      })\r\n    );\r\n  }\r\n  convertDate(dates) {\r\n    var date = new Date(dates);\r\n    var dd = String(date.getDate()).padStart(2, \"0\");\r\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\r\n    var yyyy = date.getFullYear();\r\n    var today = dd + \"/\" + mm + \"/\" + yyyy;\r\n    return today;\r\n  }\r\n\r\n  handleChange(e) {\r\n    // Variable to hold the original version of the list\r\n    let currentList = [];\r\n    // Variable to hold the filtered list before putting into state\r\n    let newList = [];\r\n\r\n    // If the search bar isn't empty\r\n    if (e.target.value !== \"\") {\r\n      //console.log(\"HERE 1\");\r\n      // Assign the original list to currentList\r\n      currentList = this.state.transactions;\r\n      let firstList = [];\r\n      let secondList = [];\r\n\r\n      // Use .filter() to determine which items should be displayed\r\n      // based on the search terms\r\n      firstList = currentList.filter((item) => {\r\n        // change current item to lowercase\r\n        const lc = item.gameInfo.name.toLowerCase();\r\n        // change search term to lowercase\r\n        const filter = e.target.value.toLowerCase();\r\n        // check to see if the current list item includes the search term\r\n        // If it does, it will be added to newList. Using lowercase eliminates\r\n        // issues with capitalization in search terms and search content\r\n        return lc.includes(filter);\r\n      });\r\n      secondList = currentList.filter((item) => {\r\n        // change current item to lowercase\r\n        const lc = item.customerInfo.name.toLowerCase();\r\n        // change search term to lowercase\r\n        const filter = e.target.value.toLowerCase();\r\n        // check to see if the current list item includes the search term\r\n        // If it does, it will be added to newList. Using lowercase eliminates\r\n        // issues with capitalization in search terms and search content\r\n        return lc.includes(filter);\r\n      });\r\n      newList = firstList.concat(secondList);\r\n      //console.log(newList);\r\n    } else {\r\n      //console.log(\"HERE 2\");\r\n      // If the search bar is empty, set newList to original task list\r\n      newList = this.state.transactions;\r\n    }\r\n    // Set the filtered state based on what our rules added to newList\r\n    this.setState({\r\n      filtered: newList,\r\n    });\r\n  }\r\n  onClickForSort(e) {\r\n    if (e.target.value === \"Customer Name\") {\r\n      let transactions = this.state.filtered;\r\n      transactions.sort((a, b) => {\r\n        var x = a.customerInfo.name.toLowerCase();\r\n        var y = b.customerInfo.name.toLowerCase();\r\n        if (this.state.ascendingCustomerName) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingCustomerName) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      let arrow = this.state.ascendingCustomerName ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: transactions,\r\n        ascendingCustomerName: !this.state.ascendingCustomerName,\r\n        customerNameSortButtonValue: arrow,\r\n        gameNameSortButtonValue: \"Sort\",\r\n        dateIssueButtonValue: \"Sort\",\r\n        dateReturnButtonValue: \"Sort\",\r\n      });\r\n    }\r\n    if (e.target.value === \"Game Name\") {\r\n      let transactions = this.state.filtered;\r\n      transactions.sort((a, b) => {\r\n        var x = a.gameInfo.name.toLowerCase();\r\n        var y = b.gameInfo.name.toLowerCase();\r\n        if (this.state.ascendingGameName) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingGameName) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      let arrow = this.state.ascendingGameName ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: transactions,\r\n        ascendingGameName: !this.state.ascendingGameName,\r\n        gameNameSortButtonValue: arrow,\r\n        customerNameSortButtonValue: \"Sort\",\r\n        dateIssueButtonValue: \"Sort\",\r\n        dateReturnButtonValue: \"Sort\",\r\n      });\r\n    }\r\n    if (e.target.value === \"Date Issue\") {\r\n      let transactions = this.state.filtered;\r\n      transactions.sort((a, b) => {\r\n        var x = a.date_issue;\r\n        var y = b.date_issue;\r\n        if (this.state.ascendingDateIssue) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingDateIssue) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      let arrow = this.state.ascendingDateIssue ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: transactions,\r\n        ascendingDateIssue: !this.state.ascendingDateIssue,\r\n        dateIssueButtonValue: arrow,\r\n        customerNameSortButtonValue: \"Sort\",\r\n        gameNameSortButtonValue: \"Sort\",\r\n        dateReturnButtonValue: \"Sort\",\r\n      });\r\n    }\r\n    if (e.target.value === \"Date Return\") {\r\n      let transactions = this.state.filtered;\r\n      transactions.sort((a, b) => {\r\n        if (this.state.ascendingDateReturn) {\r\n          if (a.return && b.return) {\r\n            var x = a.date_return;\r\n            var y = b.date_return;\r\n            if (x < y) {\r\n              return 1;\r\n            }\r\n            if (x > y) {\r\n              return -1;\r\n            }\r\n            return 0;\r\n          } else if (!a.return && b.return) {\r\n            return 1;\r\n          } else if (a.return && !b.return) {\r\n            return -1;\r\n          } else {\r\n            var x = a.date_issue;\r\n            var y = b.date_issue;\r\n            if (x < y) {\r\n              return 1;\r\n            }\r\n            if (x > y) {\r\n              return -1;\r\n            }\r\n            return 0;\r\n          }\r\n        }\r\n        if (!this.state.ascendingDateReturn) {\r\n          if (a.return && b.return) {\r\n            var x = a.date_return;\r\n            var y = b.date_return;\r\n            if (x < y) {\r\n              return -1;\r\n            }\r\n            if (x > y) {\r\n              return 1;\r\n            }\r\n            return 0;\r\n          } else if (!a.return && b.return) {\r\n            return -1;\r\n          } else if (a.return && !b.return) {\r\n            return 1;\r\n          } else {\r\n            var x = a.date_issue;\r\n            var y = b.date_issue;\r\n            if (x < y) {\r\n              return -1;\r\n            }\r\n            if (x > y) {\r\n              return 1;\r\n            }\r\n            return 0;\r\n          }\r\n        }\r\n      });\r\n      let arrow = this.state.ascendingDateReturn ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: transactions,\r\n        ascendingDateReturn: !this.state.ascendingDateReturn,\r\n        dateReturnButtonValue: arrow,\r\n        customerNameSortButtonValue: \"Sort\",\r\n        gameNameSortButtonValue: \"Sort\",\r\n        gameNameSortButtonValue: \"Sort\",\r\n      });\r\n    }\r\n  }\r\n\r\n  getIssueDates(e) {\r\n    e.preventDefault();\r\n    if (e.target.from.value !== \"\" && e.target.to.value !== \"\") {\r\n      axios\r\n        .get(\r\n          \"https://prayuj-gamerent.herokuapp.com/transaction/dates/mode=issue&from=\" +\r\n            e.target.from.value +\r\n            \"&to=\" +\r\n            e.target.to.value\r\n        )\r\n        .then((res) =>\r\n          this.setState({\r\n            transactions: res.data,\r\n            filtered: res.data,\r\n          })\r\n        );\r\n    }\r\n  }\r\n\r\n  getReturnDates(e) {\r\n    e.preventDefault();\r\n    if (e.target.from.value !== \"\" && e.target.to.value !== \"\") {\r\n      axios\r\n        .get(\r\n          \"https://prayuj-gamerent.herokuapp.com/transaction/dates/mode=return&from=\" +\r\n            e.target.from.value +\r\n            \"&to=\" +\r\n            e.target.to.value\r\n        )\r\n        .then((res) =>\r\n          this.setState({\r\n            transactions: res.data,\r\n            filtered: res.data,\r\n          })\r\n        );\r\n    }\r\n  }\r\n\r\n  getToday() {\r\n    var date = new Date();\r\n    var dd = String(date.getDate()).padStart(2, \"0\");\r\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\r\n    var yyyy = date.getFullYear();\r\n    return yyyy + \"-\" + mm + \"-\" + dd;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          placeholder=\"Search...\"\r\n          onChange={this.handleChange}\r\n        />\r\n        <form onSubmit={this.getIssueDates}>\r\n          Select Date of Issue\r\n          <input\r\n            name=\"from\"\r\n            type=\"date\"\r\n            value={this.state.dateIssueFrom}\r\n            max={this.getToday()}\r\n            onChange={(e) => this.setState({ dateIssueFrom: e.target.value })}\r\n          />\r\n          to\r\n          <input\r\n            name=\"to\"\r\n            type=\"date\"\r\n            value={this.state.dateIssueTo}\r\n            min={this.state.dateIssueFrom}\r\n            max={this.getToday()}\r\n            onChange={(e) => this.setState({ dateIssueTo: e.target.value })}\r\n          />\r\n          <input type=\"submit\" className=\"btn btn-info\" value=\"Get\" />\r\n        </form>\r\n\r\n        <form onSubmit={this.getReturnDates}>\r\n          Select Date of Return\r\n          <input\r\n            name=\"from\"\r\n            type=\"date\"\r\n            max={this.getToday()}\r\n            value={this.state.dateReturnFrom}\r\n            onChange={(e) => this.setState({ dateReturnFrom: e.target.value })}\r\n          />\r\n          to\r\n          <input\r\n            name=\"to\"\r\n            type=\"date\"\r\n            value={this.state.dateReturnTo}\r\n            min={this.state.dateReturnFrom}\r\n            max={this.getToday()}\r\n            onChange={(e) => this.setState({ dateReturnTo: e.target.value })}\r\n          />\r\n          <input type=\"submit\" className=\"btn btn-info\" value=\"Get\" />\r\n        </form>\r\n        <input\r\n          type=\"button\"\r\n          className=\"btn btn-primary\"\r\n          value=\"Show all\"\r\n          onClick={this.getTransactions}\r\n        />\r\n        <div className=\"table-responsive-xl\">\r\n          <table className=\"table\" style={{ marginTop: 20 }}>\r\n            <thead>\r\n              <tr>\r\n                <th style={{ paddingBottom: \"1.3%\" }}>Sr</th>\r\n                <th style={{ paddingBottom: \"1.3%\" }}>Transaction ID</th>\r\n                <th>\r\n                  Member Name{\" \"}\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    value=\"Customer Name\"\r\n                    onClick={this.onClickForSort}\r\n                    style={{ \"margin-left\": \"5%\" }}\r\n                  >\r\n                    {this.state.customerNameSortButtonValue}\r\n                  </button>\r\n                </th>\r\n                <th>\r\n                  Game Name{\" \"}\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    value=\"Game Name\"\r\n                    onClick={this.onClickForSort}\r\n                    style={{ \"margin-left\": \"5%\" }}\r\n                  >\r\n                    {this.state.gameNameSortButtonValue}\r\n                  </button>\r\n                </th>\r\n                <th>\r\n                  Date Issue{\" \"}\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    value=\"Date Issue\"\r\n                    onClick={this.onClickForSort}\r\n                    style={{ \"margin-left\": \"5%\" }}\r\n                  >\r\n                    {this.state.dateIssueButtonValue}\r\n                  </button>\r\n                </th>\r\n                <th>\r\n                  Date Return\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    value=\"Date Return\"\r\n                    onClick={this.onClickForSort}\r\n                    style={{ \"margin-left\": \"5%\" }}\r\n                  >\r\n                    {this.state.dateReturnButtonValue}\r\n                  </button>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.transactions_loaded ? (\r\n                this.state.filtered.map((transaction, index) => (\r\n                  <Transaction\r\n                    index={index + 1}\r\n                    id={transaction._id}\r\n                    game_name={transaction.gameInfo.name}\r\n                    customer_name={transaction.customerInfo.name}\r\n                    date_issue={this.convertDate(transaction.date_issue)}\r\n                    date_return={\r\n                      transaction.return\r\n                        ? this.convertDate(transaction.date_return)\r\n                        : \"Not Returned\"\r\n                    }\r\n                  />\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td\r\n                    colSpan=\"6\"\r\n                    style={{ position: \"relative\", top: \"50%\", left: \"50%\" }}\r\n                  >\r\n                    <LoadingSpinner></LoadingSpinner>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Transactions;\r\n"]},"metadata":{},"sourceType":"module"}