{"ast":null,"code":"var _jsxFileName = \"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\src\\\\components\\\\updateGame.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport GameForm from \"./gameForm\";\nimport { Redirect } from \"react-router-dom\";\n\nclass UpdateGame extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setRedirect = () => {\n      console.log(\"Test\");\n      this.setState({\n        redirect: true\n      });\n    };\n\n    this.renderRedirect = () => {\n      if (this.state.redirect) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          push: true,\n          to: \"/game/\" + this.state.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 14\n          }\n        });\n      }\n    };\n\n    this.state = {\n      id: props.match.params.id,\n      name: \"\",\n      description: \"\",\n      items: [{\n        console: \"\",\n        id: 1,\n        serial: \"\",\n        mrp: \"\"\n      }]\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    this.getGame();\n  }\n\n  onSubmit(e, count, items, old_items) {\n    console.log(e.target, count, items, old_items);\n    let temp_items = [];\n\n    for (let i = 0; i < count; i++) {\n      if (items[i].new === true) {\n        console.log(\"We are in new block\");\n        let index = 4 * i + 2 + old_items.length * 4;\n        let serial = e.target[index].value;\n        let consol = e.target[index + 1].value;\n        let mrp = e.target[index + 2].value;\n        console.log(i);\n        temp_items.push({\n          console: consol,\n          serial_no: serial,\n          status: \"Available\",\n          responsible: \"Owner\",\n          mrp: mrp,\n          description: \"Test\"\n        });\n      } else {\n        console.log(\"We are in old block\");\n        temp_items.push(items[i]);\n      }\n    }\n\n    for (let i = 0; i < old_items.length; i++) {\n      temp_items.push(old_items[i]);\n    }\n\n    console.log(temp_items);\n    const newGame = {\n      _id: this.state.id,\n      name: e.target.name.value,\n      description: e.target.description.value,\n      items: temp_items\n    };\n    axios.post(\"https://prayuj-gamerent.herokuapp.com/game/update/\" + this.state.id, newGame).then(res => {\n      console.log(res.data);\n      this.setRedirect();\n    }).catch(err => console.log(err));\n  }\n\n  getGame() {\n    axios.get(\"https://prayuj-gamerent.herokuapp.com/game/\" + this.state.id).then(res => {\n      console.log(res.data);\n      this.setState({\n        name: res.data.name,\n        description: res.data.description,\n        items: res.data.items,\n        count: res.data.items.length\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    console.log(this.state);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, this.renderRedirect(), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }, \"Update Game\"), /*#__PURE__*/React.createElement(GameForm, {\n      handleForm: this.onSubmit,\n      mode: \"update\",\n      name: this.state.name,\n      description: this.state.description,\n      items: this.state.items,\n      count: this.state.count,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }));\n  } //   name: nextProps.name,\n  //         description: nextProps.description,\n  //         items: nextProps.items,\n  //         count: nextProps.count\n\n\n}\n\nexport default UpdateGame;","map":{"version":3,"sources":["C:/Prayuj Folders/Game-Renting-Service/frontend/src/components/updateGame.js"],"names":["React","Component","axios","GameForm","Redirect","UpdateGame","constructor","props","setRedirect","console","log","setState","redirect","renderRedirect","state","id","match","params","name","description","items","serial","mrp","onSubmit","bind","componentDidMount","getGame","e","count","old_items","target","temp_items","i","new","index","length","value","consol","push","serial_no","status","responsible","newGame","_id","post","then","res","data","catch","err","get","render","marginTop"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AAEA,SAASC,QAAT,QAAyB,kBAAzB;;AACA,MAAMC,UAAN,SAAyBJ,SAAzB,CAAmC;AACjCK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAwFnBC,WAxFmB,GAwFL,MAAM;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,WAAKC,QAAL,CAAc;AACZC,QAAAA,QAAQ,EAAE;AADE,OAAd;AAGD,KA7FkB;;AAAA,SA+FnBC,cA/FmB,GA+FF,MAAM;AACrB,UAAI,KAAKC,KAAL,CAAWF,QAAf,EAAyB;AACvB,4BAAO,oBAAC,QAAD;AAAU,UAAA,IAAI,MAAd;AAAe,UAAA,EAAE,EAAE,WAAW,KAAKE,KAAL,CAAWC,EAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACF,KAnGkB;;AAEjB,SAAKD,KAAL,GAAa;AACXC,MAAAA,EAAE,EAAER,KAAK,CAACS,KAAN,CAAYC,MAAZ,CAAmBF,EADZ;AAEXG,MAAAA,IAAI,EAAE,EAFK;AAGXC,MAAAA,WAAW,EAAE,EAHF;AAIXC,MAAAA,KAAK,EAAE,CACL;AACEX,QAAAA,OAAO,EAAE,EADX;AAEEM,QAAAA,EAAE,EAAE,CAFN;AAGEM,QAAAA,MAAM,EAAE,EAHV;AAIEC,QAAAA,GAAG,EAAE;AAJP,OADK;AAJI,KAAb;AAaA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKC,OAAL;AACD;;AAEDH,EAAAA,QAAQ,CAACI,CAAD,EAAIC,KAAJ,EAAWR,KAAX,EAAkBS,SAAlB,EAA6B;AACnCpB,IAAAA,OAAO,CAACC,GAAR,CAAYiB,CAAC,CAACG,MAAd,EAAsBF,KAAtB,EAA6BR,KAA7B,EAAoCS,SAApC;AACA,QAAIE,UAAU,GAAG,EAAjB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,KAApB,EAA2BI,CAAC,EAA5B,EAAgC;AAC9B,UAAIZ,KAAK,CAACY,CAAD,CAAL,CAASC,GAAT,KAAiB,IAArB,EAA2B;AACzBxB,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACA,YAAIwB,KAAK,GAAG,IAAIF,CAAJ,GAAQ,CAAR,GAAYH,SAAS,CAACM,MAAV,GAAmB,CAA3C;AACA,YAAId,MAAM,GAAGM,CAAC,CAACG,MAAF,CAASI,KAAT,EAAgBE,KAA7B;AACA,YAAIC,MAAM,GAAGV,CAAC,CAACG,MAAF,CAASI,KAAK,GAAG,CAAjB,EAAoBE,KAAjC;AACA,YAAId,GAAG,GAAGK,CAAC,CAACG,MAAF,CAASI,KAAK,GAAG,CAAjB,EAAoBE,KAA9B;AACA3B,QAAAA,OAAO,CAACC,GAAR,CAAYsB,CAAZ;AACAD,QAAAA,UAAU,CAACO,IAAX,CAAgB;AACd7B,UAAAA,OAAO,EAAE4B,MADK;AAEdE,UAAAA,SAAS,EAAElB,MAFG;AAGdmB,UAAAA,MAAM,EAAE,WAHM;AAIdC,UAAAA,WAAW,EAAE,OAJC;AAKdnB,UAAAA,GAAG,EAAEA,GALS;AAMdH,UAAAA,WAAW,EAAE;AANC,SAAhB;AAQD,OAfD,MAeO;AACLV,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAqB,QAAAA,UAAU,CAACO,IAAX,CAAgBlB,KAAK,CAACY,CAAD,CAArB;AACD;AACF;;AAED,SAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,SAAS,CAACM,MAA9B,EAAsCH,CAAC,EAAvC,EAA2C;AACzCD,MAAAA,UAAU,CAACO,IAAX,CAAgBT,SAAS,CAACG,CAAD,CAAzB;AACD;;AACDvB,IAAAA,OAAO,CAACC,GAAR,CAAYqB,UAAZ;AAEA,UAAMW,OAAO,GAAG;AACdC,MAAAA,GAAG,EAAE,KAAK7B,KAAL,CAAWC,EADF;AAEdG,MAAAA,IAAI,EAAES,CAAC,CAACG,MAAF,CAASZ,IAAT,CAAckB,KAFN;AAGdjB,MAAAA,WAAW,EAAEQ,CAAC,CAACG,MAAF,CAASX,WAAT,CAAqBiB,KAHpB;AAIdhB,MAAAA,KAAK,EAAEW;AAJO,KAAhB;AAOA7B,IAAAA,KAAK,CACF0C,IADH,CAEI,uDAAuD,KAAK9B,KAAL,CAAWC,EAFtE,EAGI2B,OAHJ,EAKGG,IALH,CAKSC,GAAD,IAAS;AACbrC,MAAAA,OAAO,CAACC,GAAR,CAAYoC,GAAG,CAACC,IAAhB;AACA,WAAKvC,WAAL;AACD,KARH,EASGwC,KATH,CASUC,GAAD,IAASxC,OAAO,CAACC,GAAR,CAAYuC,GAAZ,CATlB;AAUD;;AAEDvB,EAAAA,OAAO,GAAG;AACRxB,IAAAA,KAAK,CACFgD,GADH,CACO,gDAAgD,KAAKpC,KAAL,CAAWC,EADlE,EAEG8B,IAFH,CAESC,GAAD,IAAS;AACbrC,MAAAA,OAAO,CAACC,GAAR,CAAYoC,GAAG,CAACC,IAAhB;AACA,WAAKpC,QAAL,CAAc;AACZO,QAAAA,IAAI,EAAE4B,GAAG,CAACC,IAAJ,CAAS7B,IADH;AAEZC,QAAAA,WAAW,EAAE2B,GAAG,CAACC,IAAJ,CAAS5B,WAFV;AAGZC,QAAAA,KAAK,EAAE0B,GAAG,CAACC,IAAJ,CAAS3B,KAHJ;AAIZQ,QAAAA,KAAK,EAAEkB,GAAG,CAACC,IAAJ,CAAS3B,KAAT,CAAee;AAJV,OAAd;AAMD,KAVH,EAWGa,KAXH,CAWUC,GAAD,IAAS;AACdxC,MAAAA,OAAO,CAACC,GAAR,CAAYuC,GAAZ;AACD,KAbH;AAcD;;AAeDE,EAAAA,MAAM,GAAG;AACP1C,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKI,KAAjB;AACA,wBACE;AAAK,MAAA,KAAK,EAAE;AAAEsC,QAAAA,SAAS,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKvC,cAAL,EADH,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFF,eAGE,oBAAC,QAAD;AACE,MAAA,UAAU,EAAE,KAAKU,QADnB;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,IAAI,EAAE,KAAKT,KAAL,CAAWI,IAHnB;AAIE,MAAA,WAAW,EAAE,KAAKJ,KAAL,CAAWK,WAJ1B;AAKE,MAAA,KAAK,EAAE,KAAKL,KAAL,CAAWM,KALpB;AAME,MAAA,KAAK,EAAE,KAAKN,KAAL,CAAWc,KANpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADF;AAcD,GAtHgC,CAwHjC;AACA;AACA;AACA;;;AA3HiC;;AA8HnC,eAAevB,UAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport GameForm from \"./gameForm\";\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\nclass UpdateGame extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: props.match.params.id,\r\n      name: \"\",\r\n      description: \"\",\r\n      items: [\r\n        {\r\n          console: \"\",\r\n          id: 1,\r\n          serial: \"\",\r\n          mrp: \"\",\r\n        },\r\n      ],\r\n    };\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getGame();\r\n  }\r\n\r\n  onSubmit(e, count, items, old_items) {\r\n    console.log(e.target, count, items, old_items);\r\n    let temp_items = [];\r\n    for (let i = 0; i < count; i++) {\r\n      if (items[i].new === true) {\r\n        console.log(\"We are in new block\");\r\n        let index = 4 * i + 2 + old_items.length * 4;\r\n        let serial = e.target[index].value;\r\n        let consol = e.target[index + 1].value;\r\n        let mrp = e.target[index + 2].value;\r\n        console.log(i);\r\n        temp_items.push({\r\n          console: consol,\r\n          serial_no: serial,\r\n          status: \"Available\",\r\n          responsible: \"Owner\",\r\n          mrp: mrp,\r\n          description: \"Test\",\r\n        });\r\n      } else {\r\n        console.log(\"We are in old block\");\r\n        temp_items.push(items[i]);\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < old_items.length; i++) {\r\n      temp_items.push(old_items[i]);\r\n    }\r\n    console.log(temp_items);\r\n\r\n    const newGame = {\r\n      _id: this.state.id,\r\n      name: e.target.name.value,\r\n      description: e.target.description.value,\r\n      items: temp_items,\r\n    };\r\n\r\n    axios\r\n      .post(\r\n        \"https://prayuj-gamerent.herokuapp.com/game/update/\" + this.state.id,\r\n        newGame\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.setRedirect();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  getGame() {\r\n    axios\r\n      .get(\"https://prayuj-gamerent.herokuapp.com/game/\" + this.state.id)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.setState({\r\n          name: res.data.name,\r\n          description: res.data.description,\r\n          items: res.data.items,\r\n          count: res.data.items.length,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  setRedirect = () => {\r\n    console.log(\"Test\");\r\n    this.setState({\r\n      redirect: true,\r\n    });\r\n  };\r\n\r\n  renderRedirect = () => {\r\n    if (this.state.redirect) {\r\n      return <Redirect push to={\"/game/\" + this.state.id} />;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    console.log(this.state);\r\n    return (\r\n      <div style={{ marginTop: 10 }}>\r\n        {this.renderRedirect()}\r\n        <h3>Update Game</h3>\r\n        <GameForm\r\n          handleForm={this.onSubmit}\r\n          mode=\"update\"\r\n          name={this.state.name}\r\n          description={this.state.description}\r\n          items={this.state.items}\r\n          count={this.state.count}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //   name: nextProps.name,\r\n  //         description: nextProps.description,\r\n  //         items: nextProps.items,\r\n  //         count: nextProps.count\r\n}\r\n\r\nexport default UpdateGame;\r\n"]},"metadata":{},"sourceType":"module"}