{"ast":null,"code":"import _classCallCheck from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"react-dates/initialize\";import\"react-dates/lib/css/_datepicker.css\";import axios from\"axios\";import Customer from\"./customer\";import Game from\"./game\";import loadingSpinner from\"./loadingSpinner\";import LoadingSpinner from\"./loadingSpinner\";var Dashboard=/*#__PURE__*/function(_Component){_inherits(Dashboard,_Component);var _super=_createSuper(Dashboard);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this,props);_this.state={customers:[],issue_game:[],return_game:[],search:\"\",dateFrom:\"\",dateTo:\"\",CustomersAdded:0,MembershipEnding:0,GamesIssued:0,GamesReturn:0,message:\"Today\",issue_game_loaded:false,return_game_loaded:false,customers_loaded:false};_this.getDetails=_this.getDetails.bind(_assertThisInitialized(_this));_this.getCustomers=_this.getCustomers.bind(_assertThisInitialized(_this));_this.getIssuedGames=_this.getIssuedGames.bind(_assertThisInitialized(_this));_this.getReturnedGames=_this.getReturnedGames.bind(_assertThisInitialized(_this));_this.getDashboardDetails=_this.getDashboardDetails.bind(_assertThisInitialized(_this));return _this;}_createClass(Dashboard,[{key:\"componentDidMount\",value:function componentDidMount(){this.getDetails();this.getCustomers();this.getIssuedGames();this.getReturnedGames();}},{key:\"getDetails\",value:function getDetails(){var _this2=this;axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/CustomersAdded/from=\"+this.getToday()+\"&to=\"+this.getToday()).then(function(res){_this2.setState({CustomersAdded:res.data.CustomersAdded});});axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/MembershipEnding/from=\"+this.getToday()+\"&to=\"+this.getToday()).then(function(res){_this2.setState({MembershipEnding:res.data.MembershipEnding});});axios.get(\"https://prayuj-gamerent.herokuapp.com/game/GamesIssued/from=\"+this.getToday()+\"&to=\"+this.getToday()).then(function(res){_this2.setState({GamesIssued:res.data.GamesIssued});});axios.get(\"https://prayuj-gamerent.herokuapp.com/game/GamesReturn/from=\"+this.getToday()+\"&to=\"+this.getToday()).then(function(res){_this2.setState({GamesReturn:res.data.GamesReturn});});}},{key:\"getCustomers\",value:function getCustomers(){var _this3=this;axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/dashboard\").then(function(res){_this3.setState({customers:res.data,customers_loaded:true});});}},{key:\"getIssuedGames\",value:function getIssuedGames(){var _this4=this;axios.get(\"https://prayuj-gamerent.herokuapp.com/game/dashboard/issue\").then(function(res){console.log(res.data);_this4.setState({issue_game:res.data,issue_game_loaded:true});});}},{key:\"getReturnedGames\",value:function getReturnedGames(){var _this5=this;axios.get(\"https://prayuj-gamerent.herokuapp.com/game/dashboard/return\").then(function(res){console.log(res.data);_this5.setState({return_game:res.data,return_game_loaded:true});});}},{key:\"convertDate\",value:function convertDate(dates){var date=new Date(dates);var dd=String(date.getDate()).padStart(2,\"0\");var mm=parseInt(date.getMonth());//January is 0!\nvar yyyy=date.getFullYear();var month_names=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];var today=dd+\"/\"+month_names[mm]+\"/\"+yyyy;console.log(today);return today;}},{key:\"getToday\",value:function getToday(){var date=new Date();var dd=String(date.getDate()).padStart(2,\"0\");var mm=String(date.getMonth()+1).padStart(2,\"0\");//January is 0!\nvar yyyy=date.getFullYear();return yyyy+\"-\"+mm+\"-\"+dd;}},{key:\"getDashboardDetails\",value:function getDashboardDetails(e){var _this6=this;e.preventDefault();if(e.target.from.value!==\"\"&&e.target.to.value!==\"\"){axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/CustomersAdded/from=\"+e.target.from.value+\"&to=\"+e.target.to.value).then(function(res){_this6.setState({CustomersAdded:res.data.CustomersAdded});});axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/MembershipEnding/from=\"+e.target.from.value+\"&to=\"+e.target.to.value).then(function(res){_this6.setState({MembershipEnding:res.data.MembershipEnding});});axios.get(\"https://prayuj-gamerent.herokuapp.com/game/GamesIssued/from=\"+e.target.from.value+\"&to=\"+e.target.to.value).then(function(res){_this6.setState({GamesIssued:res.data.GamesIssued});});axios.get(\"https://prayuj-gamerent.herokuapp.com/game/GamesReturn/from=\"+e.target.from.value+\"&to=\"+e.target.to.value).then(function(res){_this6.setState({GamesReturn:res.data.GamesReturn});});if(this.state.dateFrom===this.state.dateTo){if(this.state.dateFrom===this.getToday()){this.setState({message:\"Today\"});}else{this.setState({message:\"on \"+this.convertDate(this.state.dateTo)+\" \"});}}else this.setState({message:\"from \"+this.convertDate(this.state.dateFrom)+\" to \"+this.convertDate(this.state.dateTo)+\" \"});}}},{key:\"render\",value:function render(){var _this7=this;var message=\"today\";if(this.state.dateFrom!=\"\"&&this.state.dateTo!=\"\"){if(this.state.dateFrom===this.state.dateTo)message=\"on \"+this.convertDate(this.state.dateTo)+\" \";else message=\"from \"+this.convertDate(this.state.dateFrom)+\" to \"+this.convertDate(this.state.dateTo)+\" \";}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.getDashboardDetails},\"Select Dates\",/*#__PURE__*/React.createElement(\"input\",{name:\"from\",type:\"date\",value:this.state.dateFrom,max:this.getToday(),onChange:function onChange(e){return _this7.setState({dateFrom:e.target.value});}}),\"to\",/*#__PURE__*/React.createElement(\"input\",{name:\"to\",type:\"date\",value:this.state.dateTo,min:this.state.dateFrom,max:this.getToday(),onChange:function onChange(e){return _this7.setState({dateTo:e.target.value});}}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn btn-info\",value:\"Get\"})),/*#__PURE__*/React.createElement(\"h4\",null,this.state.CustomersAdded+\" \",\"Customers Added \",this.state.message),/*#__PURE__*/React.createElement(\"h4\",null,this.state.MembershipEnding+\" \",\"Customers Membership Ending \",this.state.message),/*#__PURE__*/React.createElement(\"h4\",null,this.state.GamesIssued+\" \",\"Games Issued \",this.state.message),/*#__PURE__*/React.createElement(\"h4\",null,this.state.GamesReturn+\" \",\"Games Returned \",this.state.message)),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h3\",null,\"Recently Issued Games\"),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive-xl\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table\",style:{marginTop:20}},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Sr\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Issued To\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date Of Issue\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.issue_game_loaded?this.state.issue_game.map(function(game,index){return/*#__PURE__*/React.createElement(Game,{mode:\"issue\",_id:game._id,sr:index+1,name:game.gameInfo.name,cust_name:game.customerInfo.name,dateIssue:_this7.convertDate(game.date_issue)});}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"4\",style:{position:\"relative\",top:\"50%\",left:\"50%\"}},/*#__PURE__*/React.createElement(LoadingSpinner,null)))))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h3\",null,\"Recently Returned Games\"),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive-xl\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table\",style:{marginTop:20}},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Sr\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Returned By\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date Of Issue\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date Of Return\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.return_game_loaded?this.state.return_game.map(function(game,index){return/*#__PURE__*/React.createElement(Game,{mode:\"return\",_id:game._id,sr:index+1,name:game.gameInfo.name,cust_name:game.customerInfo.name,dateIssue:_this7.convertDate(game.date_issue),dateReturn:_this7.convertDate(game.date_return)});}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"5\",style:{position:\"relative\",top:\"50%\",left:\"50%\"}},/*#__PURE__*/React.createElement(LoadingSpinner,null)))))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Membership Ending Soon\"),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive-xl\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table\",style:{marginTop:20,padding:\"2px\"}},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Sr\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email-ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date Ending\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.customers_loaded?this.state.customers.map(function(customer,index){return/*#__PURE__*/React.createElement(Customer,{mode:\"dashboard\",id:customer._id,sr:index+1,name:customer.name,email:customer.email,dateEnding:_this7.convertDate(customer.latestMembership.end)});}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"4\",style:{position:\"relative\",top:\"50%\",left:\"50%\"}},/*#__PURE__*/React.createElement(LoadingSpinner,null))))))));}}]);return Dashboard;}(Component);export default Dashboard;","map":{"version":3,"sources":["C:/Prayuj Folders/Game-Renting-Service/frontend/src/components/dashboard.js"],"names":["React","Component","axios","Customer","Game","loadingSpinner","LoadingSpinner","Dashboard","props","state","customers","issue_game","return_game","search","dateFrom","dateTo","CustomersAdded","MembershipEnding","GamesIssued","GamesReturn","message","issue_game_loaded","return_game_loaded","customers_loaded","getDetails","bind","getCustomers","getIssuedGames","getReturnedGames","getDashboardDetails","get","getToday","then","res","setState","data","console","log","dates","date","Date","dd","String","getDate","padStart","mm","parseInt","getMonth","yyyy","getFullYear","month_names","today","e","preventDefault","target","from","value","to","convertDate","marginTop","map","game","index","_id","gameInfo","name","customerInfo","date_issue","position","top","left","date_return","padding","customer","email","latestMembership","end"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"react-dates/initialize\";\r\nimport \"react-dates/lib/css/_datepicker.css\";\r\nimport axios from \"axios\";\r\nimport Customer from \"./customer\";\r\nimport Game from \"./game\";\r\nimport loadingSpinner from \"./loadingSpinner\";\r\nimport LoadingSpinner from \"./loadingSpinner\";\r\n\r\nclass Dashboard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      customers: [],\r\n      issue_game: [],\r\n      return_game: [],\r\n      search: \"\",\r\n      dateFrom: \"\",\r\n      dateTo: \"\",\r\n      CustomersAdded: 0,\r\n      MembershipEnding: 0,\r\n      GamesIssued: 0,\r\n      GamesReturn: 0,\r\n      message: \"Today\",\r\n      issue_game_loaded: false,\r\n      return_game_loaded: false,\r\n      customers_loaded: false,\r\n    };\r\n    this.getDetails = this.getDetails.bind(this);\r\n    this.getCustomers = this.getCustomers.bind(this);\r\n    this.getIssuedGames = this.getIssuedGames.bind(this);\r\n    this.getReturnedGames = this.getReturnedGames.bind(this);\r\n    this.getDashboardDetails = this.getDashboardDetails.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getDetails();\r\n    this.getCustomers();\r\n    this.getIssuedGames();\r\n    this.getReturnedGames();\r\n  }\r\n\r\n  getDetails() {\r\n    axios\r\n      .get(\r\n        \"https://prayuj-gamerent.herokuapp.com/customer/CustomersAdded/from=\" +\r\n          this.getToday() +\r\n          \"&to=\" +\r\n          this.getToday()\r\n      )\r\n      .then((res) => {\r\n        this.setState({\r\n          CustomersAdded: res.data.CustomersAdded,\r\n        });\r\n      });\r\n\r\n    axios\r\n      .get(\r\n        \"https://prayuj-gamerent.herokuapp.com/customer/MembershipEnding/from=\" +\r\n          this.getToday() +\r\n          \"&to=\" +\r\n          this.getToday()\r\n      )\r\n      .then((res) => {\r\n        this.setState({\r\n          MembershipEnding: res.data.MembershipEnding,\r\n        });\r\n      });\r\n\r\n    axios\r\n      .get(\r\n        \"https://prayuj-gamerent.herokuapp.com/game/GamesIssued/from=\" +\r\n          this.getToday() +\r\n          \"&to=\" +\r\n          this.getToday()\r\n      )\r\n      .then((res) => {\r\n        this.setState({\r\n          GamesIssued: res.data.GamesIssued,\r\n        });\r\n      });\r\n\r\n    axios\r\n      .get(\r\n        \"https://prayuj-gamerent.herokuapp.com/game/GamesReturn/from=\" +\r\n          this.getToday() +\r\n          \"&to=\" +\r\n          this.getToday()\r\n      )\r\n      .then((res) => {\r\n        this.setState({\r\n          GamesReturn: res.data.GamesReturn,\r\n        });\r\n      });\r\n  }\r\n\r\n  getCustomers() {\r\n    axios\r\n      .get(\"https://prayuj-gamerent.herokuapp.com/customer/dashboard\")\r\n      .then((res) => {\r\n        this.setState({\r\n          customers: res.data,\r\n          customers_loaded: true,\r\n        });\r\n      });\r\n  }\r\n\r\n  getIssuedGames() {\r\n    axios\r\n      .get(\"https://prayuj-gamerent.herokuapp.com/game/dashboard/issue\")\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.setState({\r\n          issue_game: res.data,\r\n          issue_game_loaded: true,\r\n        });\r\n      });\r\n  }\r\n\r\n  getReturnedGames() {\r\n    axios\r\n      .get(\"https://prayuj-gamerent.herokuapp.com/game/dashboard/return\")\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.setState({\r\n          return_game: res.data,\r\n          return_game_loaded: true,\r\n        });\r\n      });\r\n  }\r\n\r\n  convertDate(dates) {\r\n    var date = new Date(dates);\r\n    var dd = String(date.getDate()).padStart(2, \"0\");\r\n    var mm = parseInt(date.getMonth()); //January is 0!\r\n    var yyyy = date.getFullYear();\r\n    var month_names = [\r\n      \"Jan\",\r\n      \"Feb\",\r\n      \"Mar\",\r\n      \"Apr\",\r\n      \"May\",\r\n      \"Jun\",\r\n      \"Jul\",\r\n      \"Aug\",\r\n      \"Sep\",\r\n      \"Oct\",\r\n      \"Nov\",\r\n      \"Dec\",\r\n    ];\r\n    var today = dd + \"/\" + month_names[mm] + \"/\" + yyyy;\r\n    console.log(today);\r\n    return today;\r\n  }\r\n  getToday() {\r\n    var date = new Date();\r\n    var dd = String(date.getDate()).padStart(2, \"0\");\r\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\r\n    var yyyy = date.getFullYear();\r\n    return yyyy + \"-\" + mm + \"-\" + dd;\r\n  }\r\n\r\n  getDashboardDetails(e) {\r\n    e.preventDefault();\r\n    if (e.target.from.value !== \"\" && e.target.to.value !== \"\") {\r\n      axios\r\n        .get(\r\n          \"https://prayuj-gamerent.herokuapp.com/customer/CustomersAdded/from=\" +\r\n            e.target.from.value +\r\n            \"&to=\" +\r\n            e.target.to.value\r\n        )\r\n        .then((res) => {\r\n          this.setState({\r\n            CustomersAdded: res.data.CustomersAdded,\r\n          });\r\n        });\r\n\r\n      axios\r\n        .get(\r\n          \"https://prayuj-gamerent.herokuapp.com/customer/MembershipEnding/from=\" +\r\n            e.target.from.value +\r\n            \"&to=\" +\r\n            e.target.to.value\r\n        )\r\n        .then((res) => {\r\n          this.setState({\r\n            MembershipEnding: res.data.MembershipEnding,\r\n          });\r\n        });\r\n\r\n      axios\r\n        .get(\r\n          \"https://prayuj-gamerent.herokuapp.com/game/GamesIssued/from=\" +\r\n            e.target.from.value +\r\n            \"&to=\" +\r\n            e.target.to.value\r\n        )\r\n        .then((res) => {\r\n          this.setState({\r\n            GamesIssued: res.data.GamesIssued,\r\n          });\r\n        });\r\n\r\n      axios\r\n        .get(\r\n          \"https://prayuj-gamerent.herokuapp.com/game/GamesReturn/from=\" +\r\n            e.target.from.value +\r\n            \"&to=\" +\r\n            e.target.to.value\r\n        )\r\n        .then((res) => {\r\n          this.setState({\r\n            GamesReturn: res.data.GamesReturn,\r\n          });\r\n        });\r\n      if (this.state.dateFrom === this.state.dateTo)\r\n        if (this.state.dateFrom === this.getToday()) {\r\n          this.setState({\r\n            message: \"Today\",\r\n          });\r\n        } else {\r\n          this.setState({\r\n            message: \"on \" + this.convertDate(this.state.dateTo) + \" \",\r\n          });\r\n        }\r\n      else\r\n        this.setState({\r\n          message:\r\n            \"from \" +\r\n            this.convertDate(this.state.dateFrom) +\r\n            \" to \" +\r\n            this.convertDate(this.state.dateTo) +\r\n            \" \",\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let message = \"today\";\r\n    if (this.state.dateFrom != \"\" && this.state.dateTo != \"\") {\r\n      if (this.state.dateFrom === this.state.dateTo)\r\n        message = \"on \" + this.convertDate(this.state.dateTo) + \" \";\r\n      else\r\n        message =\r\n          \"from \" +\r\n          this.convertDate(this.state.dateFrom) +\r\n          \" to \" +\r\n          this.convertDate(this.state.dateTo) +\r\n          \" \";\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <form onSubmit={this.getDashboardDetails}>\r\n            Select Dates\r\n            <input\r\n              name=\"from\"\r\n              type=\"date\"\r\n              value={this.state.dateFrom}\r\n              max={this.getToday()}\r\n              onChange={(e) => this.setState({ dateFrom: e.target.value })}\r\n            />\r\n            to\r\n            <input\r\n              name=\"to\"\r\n              type=\"date\"\r\n              value={this.state.dateTo}\r\n              min={this.state.dateFrom}\r\n              max={this.getToday()}\r\n              onChange={(e) => this.setState({ dateTo: e.target.value })}\r\n            />\r\n            <input type=\"submit\" className=\"btn btn-info\" value=\"Get\" />\r\n          </form>\r\n          <h4>\r\n            {this.state.CustomersAdded + \" \"}\r\n            Customers Added {this.state.message}\r\n          </h4>\r\n          <h4>\r\n            {this.state.MembershipEnding + \" \"}\r\n            Customers Membership Ending {this.state.message}\r\n          </h4>\r\n          <h4>\r\n            {this.state.GamesIssued + \" \"}\r\n            Games Issued {this.state.message}\r\n          </h4>\r\n          <h4>\r\n            {this.state.GamesReturn + \" \"}\r\n            Games Returned {this.state.message}\r\n          </h4>\r\n        </div>\r\n        <hr />\r\n        <br />\r\n        <h3>Recently Issued Games</h3>\r\n        <div className=\"table-responsive-xl\">\r\n          <table className=\"table\" style={{ marginTop: 20 }}>\r\n            <thead>\r\n              <tr>\r\n                <th>Sr</th>\r\n                <th>Name</th>\r\n                <th>Issued To</th>\r\n                <th>Date Of Issue</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.issue_game_loaded ? (\r\n                this.state.issue_game.map((game, index) => (\r\n                  <Game\r\n                    mode=\"issue\"\r\n                    _id={game._id}\r\n                    sr={index + 1}\r\n                    name={game.gameInfo.name}\r\n                    cust_name={game.customerInfo.name}\r\n                    dateIssue={this.convertDate(game.date_issue)}\r\n                  />\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td\r\n                    colSpan=\"4\"\r\n                    style={{ position: \"relative\", top: \"50%\", left: \"50%\" }}\r\n                  >\r\n                    <LoadingSpinner></LoadingSpinner>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <hr />\r\n        <br />\r\n        <h3>Recently Returned Games</h3>\r\n        <div className=\"table-responsive-xl\">\r\n          <table className=\"table\" style={{ marginTop: 20 }}>\r\n            <thead>\r\n              <tr>\r\n                <th>Sr</th>\r\n                <th>Name</th>\r\n                <th>Returned By</th>\r\n                <th>Date Of Issue</th>\r\n                <th>Date Of Return</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.return_game_loaded ? (\r\n                this.state.return_game.map((game, index) => (\r\n                  <Game\r\n                    mode=\"return\"\r\n                    _id={game._id}\r\n                    sr={index + 1}\r\n                    name={game.gameInfo.name}\r\n                    cust_name={game.customerInfo.name}\r\n                    dateIssue={this.convertDate(game.date_issue)}\r\n                    dateReturn={this.convertDate(game.date_return)}\r\n                  />\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td\r\n                    colSpan=\"5\"\r\n                    style={{ position: \"relative\", top: \"50%\", left: \"50%\" }}\r\n                  >\r\n                    <LoadingSpinner></LoadingSpinner>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <hr />\r\n        <br />\r\n        <div>\r\n          <h3>Membership Ending Soon</h3>\r\n          <div className=\"table-responsive-xl\">\r\n            <table className=\"table\" style={{ marginTop: 20, padding: \"2px\" }}>\r\n              <thead>\r\n                <tr>\r\n                  <th>Sr</th>\r\n                  <th>Name</th>\r\n                  <th>Email-ID</th>\r\n                  <th>Date Ending</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.state.customers_loaded ? (\r\n                  this.state.customers.map((customer, index) => (\r\n                    <Customer\r\n                      mode=\"dashboard\"\r\n                      id={customer._id}\r\n                      sr={index + 1}\r\n                      name={customer.name}\r\n                      email={customer.email}\r\n                      dateEnding={this.convertDate(\r\n                        customer.latestMembership.end\r\n                      )}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <tr>\r\n                    <td\r\n                      colSpan=\"4\"\r\n                      style={{ position: \"relative\", top: \"50%\", left: \"50%\" }}\r\n                    >\r\n                      <LoadingSpinner></LoadingSpinner>\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}