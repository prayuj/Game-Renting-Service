{"ast":null,"code":"import _classCallCheck from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";var AddPlan=/*#__PURE__*/function(_Component){_inherits(AddPlan,_Component);var _super=_createSuper(AddPlan);function AddPlan(props){var _this;_classCallCheck(this,AddPlan);_this=_super.call(this,props);_this.state={id:props.match.params.id,name:\"\",membership:[],status:false};_this.handleForm=_this.handleForm.bind(_assertThisInitialized(_this));_this.getPlans=_this.getPlans.bind(_assertThisInitialized(_this));return _this;}_createClass(AddPlan,[{key:\"componentDidMount\",value:function componentDidMount(){this.getPlans();}},{key:\"getPlans\",value:function getPlans(){var _this2=this;axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/\"+this.state.id).then(function(res){_this2.setState({membership:res.data.membership});});}},{key:\"convertDate\",value:function convertDate(dates){var date=new Date(dates);var dd=String(date.getDate()).padStart(2,\"0\");var mm=String(date.getMonth()+1).padStart(2,\"0\");//January is 0!\nvar yyyy=date.getFullYear();var today=dd+\"/\"+mm+\"/\"+yyyy;console.log(today);return today;}},{key:\"handleForm\",value:function handleForm(e){var _this3=this;e.preventDefault();var today=new Date();var dd=today.getDate();var mm=today.getMonth();var yyyy=today.getFullYear();var endDate;var plan;if(e.target.plan.value===\"3 months, 1 game/month\"){endDate=new Date(yyyy,mm+3,dd);plan=\"3M1G\";}else if(e.target.plan.value===\"6 months, 2 games/month\"){endDate=new Date(yyyy,mm+6,dd);plan=\"6M2G\";}else if(e.target.plan.value===\"1 year, 4 games/month\"){endDate=new Date(yyyy+1,mm,dd);plan=\"1Y4G\";}var membership=this.state.membership;for(var i=0;i<membership.length;i++){membership[i].active=false;}var new_membership={plan:plan,active:true,start:today,end:endDate};membership.push(new_membership);console.log(membership);var data={membership:membership};axios.post(\"https://prayuj-gamerent.herokuapp.com/customer/add_plan/\"+this.state.id,data).then(function(res){console.log(res.data);_this3.getPlans();}).catch(function(err){return console.log(err);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleForm},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",name:\"plan\"},/*#__PURE__*/React.createElement(\"option\",null,\"Choose a plan\"),/*#__PURE__*/React.createElement(\"option\",null,\"3 months, 1 game/month\"),/*#__PURE__*/React.createElement(\"option\",null,\"6 months, 2 games/month\"),/*#__PURE__*/React.createElement(\"option\",null,\"1 year, 4 games/month\"))),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn btn-primary\",value:\"Add Plan\"})));}}]);return AddPlan;}(Component);export default AddPlan;","map":{"version":3,"sources":["C:/Prayuj Folders/Game-Renting-Service/frontend/src/components/addPlan.js"],"names":["React","Component","axios","AddPlan","props","state","id","match","params","name","membership","status","handleForm","bind","getPlans","get","then","res","setState","data","dates","date","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","today","console","log","e","preventDefault","endDate","plan","target","value","i","length","active","new_membership","start","end","push","post","catch","err"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nclass AddPlan extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: props.match.params.id,\r\n      name: \"\",\r\n      membership: [],\r\n      status: false,\r\n    };\r\n    this.handleForm = this.handleForm.bind(this);\r\n    this.getPlans = this.getPlans.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getPlans();\r\n  }\r\n\r\n  getPlans() {\r\n    axios\r\n      .get(\"https://prayuj-gamerent.herokuapp.com/customer/\" + this.state.id)\r\n      .then((res) => {\r\n        this.setState({\r\n          membership: res.data.membership,\r\n        });\r\n      });\r\n  }\r\n\r\n  convertDate(dates) {\r\n    var date = new Date(dates);\r\n    var dd = String(date.getDate()).padStart(2, \"0\");\r\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\r\n    var yyyy = date.getFullYear();\r\n    var today = dd + \"/\" + mm + \"/\" + yyyy;\r\n    console.log(today);\r\n    return today;\r\n  }\r\n\r\n  handleForm(e) {\r\n    e.preventDefault();\r\n    let today = new Date();\r\n    let dd = today.getDate();\r\n    let mm = today.getMonth();\r\n    let yyyy = today.getFullYear();\r\n    let endDate;\r\n    let plan;\r\n    if (e.target.plan.value === \"3 months, 1 game/month\") {\r\n      endDate = new Date(yyyy, mm + 3, dd);\r\n      plan = \"3M1G\";\r\n    } else if (e.target.plan.value === \"6 months, 2 games/month\") {\r\n      endDate = new Date(yyyy, mm + 6, dd);\r\n      plan = \"6M2G\";\r\n    } else if (e.target.plan.value === \"1 year, 4 games/month\") {\r\n      endDate = new Date(yyyy + 1, mm, dd);\r\n      plan = \"1Y4G\";\r\n    }\r\n\r\n    let membership = this.state.membership;\r\n    for (let i = 0; i < membership.length; i++) {\r\n      membership[i].active = false;\r\n    }\r\n    let new_membership = {\r\n      plan: plan,\r\n      active: true,\r\n      start: today,\r\n      end: endDate,\r\n    };\r\n    membership.push(new_membership);\r\n    console.log(membership);\r\n\r\n    let data = {\r\n      membership: membership,\r\n    };\r\n\r\n    axios\r\n      .post(\r\n        \"https://prayuj-gamerent.herokuapp.com/customer/add_plan/\" +\r\n          this.state.id,\r\n        data\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.getPlans();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form onSubmit={this.handleForm}>\r\n          <div className=\"form-group\">\r\n            <select className=\"form-control\" name=\"plan\">\r\n              <option>Choose a plan</option>\r\n              <option>3 months, 1 game/month</option>\r\n              <option>6 months, 2 games/month</option>\r\n              <option>1 year, 4 games/month</option>\r\n            </select>\r\n          </div>\r\n          <input type=\"submit\" className=\"btn btn-primary\" value=\"Add Plan\" />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddPlan;\r\n"]},"metadata":{},"sourceType":"module"}