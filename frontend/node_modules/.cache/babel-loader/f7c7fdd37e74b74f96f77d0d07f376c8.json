{"ast":null,"code":"var _jsxFileName = \"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\src\\\\components\\\\addPlan.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\n\nclass AddPlan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: props.match.params.id,\n      name: \"\",\n      membership: [],\n      status: false\n    };\n    this.handleForm = this.handleForm.bind(this);\n    this.getPlans = this.getPlans.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPlans();\n  }\n\n  getPlans() {\n    axios.get(\"http://localhost:4000/customer/\" + this.state.id).then(res => {\n      this.setState({\n        membership: res.data.membership\n      });\n    });\n  }\n\n  convertDate(dates) {\n    var date = new Date(dates);\n    var dd = String(date.getDate()).padStart(2, \"0\");\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n\n    var yyyy = date.getFullYear();\n    var today = dd + \"/\" + mm + \"/\" + yyyy;\n    console.log(today);\n    return today;\n  }\n\n  handleForm(e) {\n    e.preventDefault();\n    let today = new Date();\n    let dd = today.getDate();\n    let mm = today.getMonth();\n    let yyyy = today.getFullYear();\n    let endDate;\n    let plan;\n\n    if (e.target.plan.value === \"3 months, 1 game/month\") {\n      endDate = new Date(yyyy, mm + 3, dd);\n      plan = \"3M1G\";\n    } else if (e.target.plan.value === \"6 months, 2 games/month\") {\n      endDate = new Date(yyyy, mm + 6, dd);\n      plan = \"6M2G\";\n    } else if (e.target.plan.value === \"1 year, 4 games/month\") {\n      endDate = new Date(yyyy + 1, mm, dd);\n      plan = \"1Y4G\";\n    }\n\n    let membership = this.state.membership;\n\n    for (let i = 0; i < membership.length; i++) {\n      membership[i].active = false;\n    }\n\n    let new_membership = {\n      plan: plan,\n      active: true,\n      start: today,\n      end: endDate\n    };\n    membership.push(new_membership);\n    console.log(membership);\n    let data = {\n      membership: membership\n    };\n    axios.post(\"http://localhost:4000/customer/add_plan/\" + this.state.id, data).then(res => {\n      console.log(res.data);\n      this.getPlans();\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      className: \"form-control\",\n      name: \"plan\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Choose a plan\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"3 months, 1 game/month\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"6 months, 2 games/month\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"1 year, 4 games/month\"))), React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      value: \"Add Plan\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default AddPlan;","map":{"version":3,"sources":["C:\\Prayuj Folders\\Game-Renting-Service\\frontend\\src\\components\\addPlan.js"],"names":["React","Component","axios","AddPlan","constructor","props","state","id","match","params","name","membership","status","handleForm","bind","getPlans","componentDidMount","get","then","res","setState","data","convertDate","dates","date","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","today","console","log","e","preventDefault","endDate","plan","target","value","i","length","active","new_membership","start","end","push","post","catch","err","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nclass AddPlan extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: props.match.params.id,\r\n      name: \"\",\r\n      membership: [],\r\n      status: false\r\n    };\r\n    this.handleForm = this.handleForm.bind(this);\r\n    this.getPlans = this.getPlans.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getPlans();\r\n  }\r\n\r\n  getPlans() {\r\n    axios.get(\"http://localhost:4000/customer/\" + this.state.id).then(res => {\r\n      this.setState({\r\n        membership: res.data.membership\r\n      });\r\n    });\r\n  }\r\n\r\n  convertDate(dates) {\r\n    var date = new Date(dates);\r\n    var dd = String(date.getDate()).padStart(2, \"0\");\r\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\r\n    var yyyy = date.getFullYear();\r\n    var today = dd + \"/\" + mm + \"/\" + yyyy;\r\n    console.log(today);\r\n    return today;\r\n  }\r\n\r\n  handleForm(e) {\r\n    e.preventDefault();\r\n    let today = new Date();\r\n    let dd = today.getDate();\r\n    let mm = today.getMonth();\r\n    let yyyy = today.getFullYear();\r\n    let endDate;\r\n    let plan;\r\n    if (e.target.plan.value === \"3 months, 1 game/month\") {\r\n      endDate = new Date(yyyy, mm + 3, dd);\r\n      plan = \"3M1G\";\r\n    } else if (e.target.plan.value === \"6 months, 2 games/month\") {\r\n      endDate = new Date(yyyy, mm + 6, dd);\r\n      plan = \"6M2G\";\r\n    } else if (e.target.plan.value === \"1 year, 4 games/month\") {\r\n      endDate = new Date(yyyy + 1, mm, dd);\r\n      plan = \"1Y4G\";\r\n    }\r\n\r\n    let membership = this.state.membership;\r\n    for (let i = 0; i < membership.length; i++) {\r\n      membership[i].active = false;\r\n    }\r\n    let new_membership = {\r\n      plan: plan,\r\n      active: true,\r\n      start: today,\r\n      end: endDate\r\n    };\r\n    membership.push(new_membership);\r\n    console.log(membership);\r\n\r\n    let data = {\r\n      membership: membership\r\n    };\r\n\r\n    axios\r\n      .post(\"http://localhost:4000/customer/add_plan/\" + this.state.id, data)\r\n      .then(res => {\r\n        console.log(res.data);\r\n        this.getPlans();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form onSubmit={this.handleForm}>\r\n          <div className=\"form-group\">\r\n            <select className=\"form-control\" name=\"plan\">\r\n              <option>Choose a plan</option>\r\n              <option>3 months, 1 game/month</option>\r\n              <option>6 months, 2 games/month</option>\r\n              <option>1 year, 4 games/month</option>\r\n            </select>\r\n          </div>\r\n          <input type=\"submit\" className=\"btn btn-primary\" value=\"Add Plan\" />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddPlan;\r\n"]},"metadata":{},"sourceType":"module"}