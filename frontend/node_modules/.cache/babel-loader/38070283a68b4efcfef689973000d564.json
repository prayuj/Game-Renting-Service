{"ast":null,"code":"var _jsxFileName = \"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\src\\\\components\\\\customerPage.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Button from \"react-bootstrap/Button\";\nimport { Redirect } from \"react-router-dom\";\nimport LoadingSpinner from \"./loadingSpinner\";\nimport Toast from \"react-bootstrap/Toast\";\n\nclass CustomerPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setRedirect = e => {\n      console.log(e.target.attributes[1].value);\n\n      if (e.target.attributes[0].value === \"transaction\") {\n        this.setState({\n          redirect_to_transaction: true,\n          transaction_id: e.target.attributes[1].value\n        });\n      } else if (e.target.value === \"Update\") {\n        this.setState({\n          otp_issued: false,\n          verifying: false\n        });\n        axios.get(this.props.url + \"/customer/generate_otp/id=\" + this.state.id + \"&mode=Updating&game=Null&console=Null\").then(res => {\n          console.log(res.data);\n          this.setState({\n            message: res.data.message,\n            otp_issued: true\n          });\n        });\n        this.setState({\n          modal_show: true\n        });\n      } else if (e.target.value === \"Issue\") this.setState({\n        redirect_to_issue: true\n      });else if (e.target.value === \"Return\") this.setState({\n        redirect_to_return: true\n      });else if (e.target.value === \"Add Plan\") this.setState({\n        redirect_to_add_plan: true\n      });\n    };\n\n    this.renderRedirect = () => {\n      if (this.state.redirect_to_update) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          push: true,\n          to: \"/update_customer/\" + this.state.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (this.state.redirect_to_add_plan) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          push: true,\n          to: \"/add_plan/\" + this.state.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (this.state.redirect_to_issue) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          push: true,\n          to: \"/issue/mode=customer&id=\" + this.state.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (this.state.redirect_to_return) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          push: true,\n          to: \"/return/mode=customer&id=\" + this.state.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (this.state.redirect_to_transaction) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          push: true,\n          to: \"/transaction/\" + this.state.transaction_id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 14\n          }\n        });\n      }\n    };\n\n    this.state = {\n      id: props.match.params.id,\n      data: \"\",\n      history: [],\n      modal_show: false,\n      history_loaded: false,\n      data_loaded: false,\n      otp_issued: false,\n      verifying: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.getCustomerDetail();\n    this.getCustomerGameHistory();\n  }\n\n  getCustomerGameHistory() {\n    axios.get(this.props.url + \"/customer/history/\" + this.state.id).then(res => {\n      console.log(res.data);\n      if (res.data) this.setState({\n        history: res.data,\n        history_loaded: true\n      });else this.setState({\n        history: [],\n        history_loaded: true\n      });\n    }).catch(err => console.log(err));\n  }\n\n  getCustomerDetail() {\n    axios.get(this.props.url + \"/customer/\" + this.state.id).then(res => {\n      this.setState({\n        data: res.data,\n        data_loaded: true\n      });\n    }).catch(err => console.log(err));\n  }\n\n  handleClick(e) {\n    e.preventDefault();\n    console.log(e.target.otp.value);\n    let customer_id = this.state.id;\n    this.setState({\n      verifying: true\n    });\n    axios.post(this.props.url + \"/customer/verify_otp/\" + customer_id, {\n      otp: e.target.otp.value\n    }).then(res => {\n      console.log(res.data.isVerify);\n\n      if (res.data.isVerify) {\n        this.setState({\n          redirect_to_update: true\n        });\n      } else {\n        this.setState({\n          verifying: false\n        });\n        alert(\"Incorrect OTP, Issue again\");\n      }\n    });\n  }\n\n  convertDate(dates) {\n    var date = new Date(dates);\n    var dd = String(date.getDate()).padStart(2, \"0\");\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n\n    var yyyy = date.getFullYear();\n    var today = dd + \"/\" + mm + \"/\" + yyyy;\n    return today;\n  }\n\n  render() {\n    console.log(this.state.data);\n    let membership = this.state.data.membership ? this.state.data.membership.map((member, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }, member.plan), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }\n    }, this.convertDate(member.start)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, this.convertDate(member.end)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, member.active ? \"True\" : \"False\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    });\n    let history = this.state.history.length > 0 ? this.state.history.map((game, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      className: \"items\",\n      onClick: this.setRedirect,\n      value: \"transaction\",\n      id: game._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      value: \"transaction\",\n      id: game._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      value: \"transaction\",\n      id: game._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, game.gameInfo.name), /*#__PURE__*/React.createElement(\"td\", {\n      value: \"transaction\",\n      id: game._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }\n    }, game.gameInfo.items.console), /*#__PURE__*/React.createElement(\"td\", {\n      value: \"transaction\",\n      id: game._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }\n    }, game.gameInfo.items.serial_no), /*#__PURE__*/React.createElement(\"td\", {\n      value: \"transaction\",\n      id: game._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, this.convertDate(game.date_issue)), /*#__PURE__*/React.createElement(\"td\", {\n      value: \"transaction\",\n      id: game._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    }, game.return ? this.convertDate(game.date_return) : \"Not Returned\"))) : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"6\",\n      style: {\n        position: \"relative\",\n        top: \"50%\",\n        left: \"50%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }, \"No Past History\"));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 7\n      }\n    }, this.renderRedirect(), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      onClick: this.setRedirect,\n      className: \"btn btn-primary\",\n      value: \"Update\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      onClick: this.setRedirect,\n      className: \"btn btn-primary\",\n      value: \"Add Plan\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      onClick: this.setRedirect,\n      className: \"btn btn-primary\",\n      value: \"Issue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      onClick: this.setRedirect,\n      className: \"btn btn-primary\",\n      value: \"Return\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }\n    }), this.state.data_loaded ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 15\n      }\n    }, \"Name: \"), \" \", this.state.data.name), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 15\n      }\n    }, \"Email: \"), this.state.data.email), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 15\n      }\n    }, \"Addr: \"), this.state.data.address), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 15\n      }\n    }, \"Addr2: \"), this.state.data.address2), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 15\n      }\n    }, \"ZIP: \"), this.state.data.zip), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    }, \"Mobile Number: \"), this.state.data.mobile_no), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 15\n      }\n    }, \"Alt Mobile No: \"), this.state.data.alt_mobile_no), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 15\n      }\n    }, \"Date Of Join: \"), this.convertDate(this.state.data.dateOfJoin))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(LoadingSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive-xl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      style: {\n        marginTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }\n    }, \"Sr\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }\n    }, \"Plan Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }\n    }, \"Start\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }, \"End\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }\n    }, \"Active\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 13\n      }\n    }, this.state.data_loaded ? membership : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"5\",\n      style: {\n        position: \"relative\",\n        top: \"50%\",\n        left: \"50%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(LoadingSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 21\n      }\n    })))))), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }\n    }, \"Past History:\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive-xl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      style: {\n        marginTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }\n    }, \"Sr\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    }, \"Game\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }\n    }, \"Console\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 17\n      }\n    }, \"Serial no\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }\n    }, \"Date Issue\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }\n    }, \"Date Return\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 13\n      }\n    }, this.state.history_loaded ? history : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"6\",\n      style: {\n        position: \"relative\",\n        top: \"50%\",\n        left: \"50%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(LoadingSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 21\n      }\n    })))))), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.modal_show,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 13\n      }\n    }, \"Game Return\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 15\n      }\n    }, \"Enter OTP\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"otp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }\n    })), this.state.otp_issued ? /*#__PURE__*/React.createElement(Toast, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Toast.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      className: \"mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 21\n      }\n    }, \"OTP\")), /*#__PURE__*/React.createElement(Toast.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 19\n      }\n    }, this.state.message)) : /*#__PURE__*/React.createElement(LoadingSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: () => this.setState({\n        modal_show: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 15\n      }\n    }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 15\n      }\n    }, this.state.verifying ? /*#__PURE__*/React.createElement(LoadingSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 19\n      }\n    }) : \"Verify\")))));\n  }\n\n}\n\nexport default CustomerPage;","map":{"version":3,"sources":["C:/Prayuj Folders/Game-Renting-Service/frontend/src/components/customerPage.js"],"names":["React","Component","axios","Modal","Button","Redirect","LoadingSpinner","Toast","CustomerPage","constructor","props","setRedirect","e","console","log","target","attributes","value","setState","redirect_to_transaction","transaction_id","otp_issued","verifying","get","url","state","id","then","res","data","message","modal_show","redirect_to_issue","redirect_to_return","redirect_to_add_plan","renderRedirect","redirect_to_update","match","params","history","history_loaded","data_loaded","handleClick","bind","componentDidMount","getCustomerDetail","getCustomerGameHistory","catch","err","preventDefault","otp","customer_id","post","isVerify","alert","convertDate","dates","date","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","today","render","membership","map","member","index","plan","start","end","active","length","game","_id","gameInfo","name","items","serial_no","date_issue","return","date_return","position","top","left","email","address","address2","zip","mobile_no","alt_mobile_no","dateOfJoin","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport LoadingSpinner from \"./loadingSpinner\";\r\nimport Toast from \"react-bootstrap/Toast\";\r\n\r\nclass CustomerPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: props.match.params.id,\r\n      data: \"\",\r\n      history: [],\r\n      modal_show: false,\r\n      history_loaded: false,\r\n      data_loaded: false,\r\n      otp_issued: false,\r\n      verifying: false,\r\n    };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCustomerDetail();\r\n    this.getCustomerGameHistory();\r\n  }\r\n  getCustomerGameHistory() {\r\n    axios\r\n      .get(this.props.url + \"/customer/history/\" + this.state.id)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        if (res.data)\r\n          this.setState({\r\n            history: res.data,\r\n            history_loaded: true,\r\n          });\r\n        else\r\n          this.setState({\r\n            history: [],\r\n            history_loaded: true,\r\n          });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  getCustomerDetail() {\r\n    axios\r\n      .get(this.props.url + \"/customer/\" + this.state.id)\r\n      .then((res) => {\r\n        this.setState({\r\n          data: res.data,\r\n          data_loaded: true,\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  setRedirect = (e) => {\r\n    console.log(e.target.attributes[1].value);\r\n    if (e.target.attributes[0].value === \"transaction\") {\r\n      this.setState({\r\n        redirect_to_transaction: true,\r\n        transaction_id: e.target.attributes[1].value,\r\n      });\r\n    } else if (e.target.value === \"Update\") {\r\n      this.setState({\r\n        otp_issued: false,\r\n        verifying: false,\r\n      });\r\n      axios\r\n        .get(\r\n          this.props.url +\r\n            \"/customer/generate_otp/id=\" +\r\n            this.state.id +\r\n            \"&mode=Updating&game=Null&console=Null\"\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          this.setState({ message: res.data.message, otp_issued: true });\r\n        });\r\n      this.setState({\r\n        modal_show: true,\r\n      });\r\n    } else if (e.target.value === \"Issue\")\r\n      this.setState({\r\n        redirect_to_issue: true,\r\n      });\r\n    else if (e.target.value === \"Return\")\r\n      this.setState({\r\n        redirect_to_return: true,\r\n      });\r\n    else if (e.target.value === \"Add Plan\")\r\n      this.setState({\r\n        redirect_to_add_plan: true,\r\n      });\r\n  };\r\n\r\n  renderRedirect = () => {\r\n    if (this.state.redirect_to_update) {\r\n      return <Redirect push to={\"/update_customer/\" + this.state.id} />;\r\n    }\r\n    if (this.state.redirect_to_add_plan) {\r\n      return <Redirect push to={\"/add_plan/\" + this.state.id} />;\r\n    }\r\n    if (this.state.redirect_to_issue) {\r\n      return <Redirect push to={\"/issue/mode=customer&id=\" + this.state.id} />;\r\n    }\r\n    if (this.state.redirect_to_return) {\r\n      return <Redirect push to={\"/return/mode=customer&id=\" + this.state.id} />;\r\n    }\r\n    if (this.state.redirect_to_transaction) {\r\n      return <Redirect push to={\"/transaction/\" + this.state.transaction_id} />;\r\n    }\r\n  };\r\n\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    console.log(e.target.otp.value);\r\n    let customer_id = this.state.id;\r\n    this.setState({\r\n      verifying: true,\r\n    });\r\n    axios\r\n      .post(this.props.url + \"/customer/verify_otp/\" + customer_id, {\r\n        otp: e.target.otp.value,\r\n      })\r\n      .then((res) => {\r\n        console.log(res.data.isVerify);\r\n        if (res.data.isVerify) {\r\n          this.setState({\r\n            redirect_to_update: true,\r\n          });\r\n        } else {\r\n          this.setState({ verifying: false });\r\n          alert(\"Incorrect OTP, Issue again\");\r\n        }\r\n      });\r\n  }\r\n\r\n  convertDate(dates) {\r\n    var date = new Date(dates);\r\n    var dd = String(date.getDate()).padStart(2, \"0\");\r\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\r\n    var yyyy = date.getFullYear();\r\n    var today = dd + \"/\" + mm + \"/\" + yyyy;\r\n    return today;\r\n  }\r\n  render() {\r\n    console.log(this.state.data);\r\n    let membership = this.state.data.membership ? (\r\n      this.state.data.membership.map((member, index) => (\r\n        <tr>\r\n          <td>{index + 1}</td>\r\n          <td>{member.plan}</td>\r\n          <td>{this.convertDate(member.start)}</td>\r\n          <td>{this.convertDate(member.end)}</td>\r\n          <td>{member.active ? \"True\" : \"False\"}</td>\r\n        </tr>\r\n      ))\r\n    ) : (\r\n      <div />\r\n    );\r\n\r\n    let history =\r\n      this.state.history.length > 0 ? (\r\n        this.state.history.map((game, index) => (\r\n          <tr\r\n            className=\"items\"\r\n            onClick={this.setRedirect}\r\n            value=\"transaction\"\r\n            id={game._id}\r\n          >\r\n            <td value=\"transaction\" id={game._id}>\r\n              {index + 1}\r\n            </td>\r\n            <td value=\"transaction\" id={game._id}>\r\n              {game.gameInfo.name}\r\n            </td>\r\n            <td value=\"transaction\" id={game._id}>\r\n              {game.gameInfo.items.console}\r\n            </td>\r\n            <td value=\"transaction\" id={game._id}>\r\n              {game.gameInfo.items.serial_no}\r\n            </td>\r\n            <td value=\"transaction\" id={game._id}>\r\n              {this.convertDate(game.date_issue)}\r\n            </td>\r\n            <td value=\"transaction\" id={game._id}>\r\n              {game.return\r\n                ? this.convertDate(game.date_return)\r\n                : \"Not Returned\"}\r\n            </td>\r\n          </tr>\r\n        ))\r\n      ) : (\r\n        <tr>\r\n          <td\r\n            colSpan=\"6\"\r\n            style={{ position: \"relative\", top: \"50%\", left: \"50%\" }}\r\n          >\r\n            No Past History\r\n          </td>\r\n        </tr>\r\n      );\r\n\r\n    return (\r\n      <div>\r\n        {this.renderRedirect()}\r\n        <input\r\n          type=\"button\"\r\n          onClick={this.setRedirect}\r\n          className=\"btn btn-primary\"\r\n          value=\"Update\"\r\n        />\r\n        <input\r\n          type=\"button\"\r\n          onClick={this.setRedirect}\r\n          className=\"btn btn-primary\"\r\n          value=\"Add Plan\"\r\n        />\r\n        <input\r\n          type=\"button\"\r\n          onClick={this.setRedirect}\r\n          className=\"btn btn-primary\"\r\n          value=\"Issue\"\r\n        />\r\n        <input\r\n          type=\"button\"\r\n          onClick={this.setRedirect}\r\n          className=\"btn btn-primary\"\r\n          value=\"Return\"\r\n        />\r\n        {this.state.data_loaded ? (\r\n          <>\r\n            <div>\r\n              <strong>Name: </strong> {this.state.data.name}\r\n            </div>\r\n            <div>\r\n              <strong>Email: </strong>\r\n              {this.state.data.email}\r\n            </div>\r\n            <div>\r\n              <strong>Addr: </strong>\r\n              {this.state.data.address}\r\n            </div>\r\n            <div>\r\n              <strong>Addr2: </strong>\r\n              {this.state.data.address2}\r\n            </div>\r\n            <div>\r\n              <strong>ZIP: </strong>\r\n              {this.state.data.zip}\r\n            </div>\r\n            <div>\r\n              <strong>Mobile Number: </strong>\r\n              {this.state.data.mobile_no}\r\n            </div>\r\n            <div>\r\n              <strong>Alt Mobile No: </strong>\r\n              {this.state.data.alt_mobile_no}\r\n            </div>\r\n            <div>\r\n              <strong>Date Of Join: </strong>\r\n              {this.convertDate(this.state.data.dateOfJoin)}\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <div>\r\n            <LoadingSpinner></LoadingSpinner>\r\n          </div>\r\n        )}\r\n        <div className=\"table-responsive-xl\">\r\n          <table className=\"table\" style={{ marginTop: 20 }}>\r\n            <thead>\r\n              <tr>\r\n                <th>Sr</th>\r\n                <th>Plan Name</th>\r\n                <th>Start</th>\r\n                <th>End</th>\r\n                <th>Active</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.data_loaded ? (\r\n                membership\r\n              ) : (\r\n                <tr>\r\n                  <td\r\n                    colSpan=\"5\"\r\n                    style={{ position: \"relative\", top: \"50%\", left: \"50%\" }}\r\n                  >\r\n                    <LoadingSpinner></LoadingSpinner>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <h3>Past History:</h3>\r\n        <div className=\"table-responsive-xl\">\r\n          <table className=\"table\" style={{ marginTop: 20 }}>\r\n            <thead>\r\n              <tr>\r\n                <th>Sr</th>\r\n                <th>Game</th>\r\n                <th>Console</th>\r\n                <th>Serial no</th>\r\n                <th>Date Issue</th>\r\n                <th>Date Return</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.history_loaded ? (\r\n                history\r\n              ) : (\r\n                <tr>\r\n                  <td\r\n                    colSpan=\"6\"\r\n                    style={{ position: \"relative\", top: \"50%\", left: \"50%\" }}\r\n                  >\r\n                    <LoadingSpinner></LoadingSpinner>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <Modal show={this.state.modal_show}>\r\n          <Modal.Header>\r\n            <Modal.Title>Game Return</Modal.Title>\r\n          </Modal.Header>\r\n          <form onSubmit={this.handleClick}>\r\n            <Modal.Body>\r\n              <div>\r\n                Enter OTP\r\n                <input type=\"number\" name=\"otp\" />\r\n              </div>\r\n              {this.state.otp_issued ? (\r\n                <Toast>\r\n                  <Toast.Header>\r\n                    <strong className=\"mr-auto\">OTP</strong>\r\n                  </Toast.Header>\r\n                  <Toast.Body>{this.state.message}</Toast.Body>\r\n                </Toast>\r\n              ) : (\r\n                <LoadingSpinner></LoadingSpinner>\r\n              )}\r\n            </Modal.Body>\r\n\r\n            <Modal.Footer>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => this.setState({ modal_show: false })}\r\n              >\r\n                Close\r\n              </Button>\r\n              <Button variant=\"primary\" type=\"submit\">\r\n                {this.state.verifying ? (\r\n                  <LoadingSpinner></LoadingSpinner>\r\n                ) : (\r\n                  \"Verify\"\r\n                )}\r\n              </Button>\r\n            </Modal.Footer>\r\n          </form>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CustomerPage;\r\n"]},"metadata":{},"sourceType":"module"}