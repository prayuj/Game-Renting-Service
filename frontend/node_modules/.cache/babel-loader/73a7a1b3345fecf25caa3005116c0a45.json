{"ast":null,"code":"import _classCallCheck from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{Redirect}from\"react-router-dom\";import Modal from\"react-bootstrap/Modal\";import Button from\"react-bootstrap/Button\";import Toast from\"react-bootstrap/Toast\";import LoadingSpinner from\"./loadingSpinner\";var Return=/*#__PURE__*/function(_Component){_inherits(Return,_Component);var _super=_createSuper(Return);function Return(props){var _this;_classCallCheck(this,Return);_this=_super.call(this,props);_this.setRedirect=function(){_this.setState({redirect_to_transaction:true});};_this.renderRedirect=function(){if(_this.state.redirect_to_transaction){return/*#__PURE__*/React.createElement(Redirect,{push:true,to:\"/transaction/\"+_this.state.transactionid});}};console.log(props.match.params.id);if(props.match.params.mode===\"customer\"){_this.state={mode:\"customer\",id:props.match.params.id,filtered:[],modal_show:false,ascendingCustomerName:true,ascendingGameName:true,ascendingDateIssue:true,customerNameSortButtonValue:\"Sort\",gameNameSortButtonValue:\"Sort\",dateIssueButtonValue:/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"),otp_issued:false,verifying:false,games_to_return_loaded:false};}else{_this.state={mode:\"dashboard\",id:\"all\",filtered:[],modal_show:false,ascendingCustomerName:true,ascendingGameName:true,ascendingDateIssue:true,customerNameSortButtonValue:\"Sort\",gameNameSortButtonValue:\"Sort\",dateIssueButtonValue:/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"),otp_issued:false,verifying:false,games_to_return_loaded:false};}_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));_this.confirmReturn=_this.confirmReturn.bind(_assertThisInitialized(_this));_this.modalClose=_this.modalClose.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.onClickForSort=_this.onClickForSort.bind(_assertThisInitialized(_this));return _this;}_createClass(Return,[{key:\"componentDidMount\",value:function componentDidMount(){this.getCustomerDetail();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this2=this;console.log(this.state.mode,this.props.match.params.mode);if(this.state.mode!==this.props.match.params.mode){this.setState({mode:this.props.match.params.mode,id:this.props.match.params.id},function(){_this2.getCustomerDetail();});}}},{key:\"confirmReturn\",value:function confirmReturn(e){var _this3=this;console.log(e.target.id);this.setState({otp_issued:false,verifying:false});var ids=e.target.id.split(\" \");axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/generate_otp/id=\"+ids[3]+\"&mode=Returning\"+\"&game=\"+ids[1]+\"&console=\"+ids[4]).then(function(res){console.log(res.data);_this3.setState({message:res.data.message,otp_issued:true});});this.setState({modal_show:true,ids:ids});}},{key:\"modalClose\",value:function modalClose(){{this.setState({modal_show:false});}}},{key:\"getCustomerDetail\",value:function getCustomerDetail(){var _this4=this;axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/return/\"+this.state.id).then(function(res){console.log(res.data);_this4.setState({games_to_return:res.data,filtered:res.data,show:true,games_to_return_loaded:true});}).catch(function(err){return console.log(err);});}},{key:\"handleChange\",value:function handleChange(e){console.log(e.target.value);// Variable to hold the original version of the list\nvar currentList=[];// Variable to hold the filtered list before putting into state\nvar newList=[];// If the search bar isn't empty\nif(e.target.value!==\"\"){//console.log(\"HERE 1\");\n// Assign the original list to currentList\ncurrentList=this.state.games_to_return;var firstList=[];var secondList=[];// Use .filter() to determine which items should be displayed\n// based on the search terms\nfirstList=currentList.filter(function(item){// change current item to lowercase\nvar lc=item.gameInfo.name.toLowerCase();// change search term to lowercase\nvar filter=e.target.value.toLowerCase();// check to see if the current list item includes the search term\n// If it does, it will be added to newList. Using lowercase eliminates\n// issues with capitalization in search terms and search content\nreturn lc.includes(filter);});secondList=currentList.filter(function(item){// change current item to lowercase\nvar lc=item.customerInfo.name.toLowerCase();// change search term to lowercase\nvar filter=e.target.value.toLowerCase();// check to see if the current list item includes the search term\n// If it does, it will be added to newList. Using lowercase eliminates\n// issues with capitalization in search terms and search content\nreturn lc.includes(filter);});newList=firstList.concat(secondList);//console.log(newList);\n}else{//console.log(\"HERE 2\");\n// If the search bar is empty, set newList to original task list\nnewList=this.state.filtered;}console.log(newList);// Set the filtered state based on what our rules added to newList\nthis.setState({filtered:newList});}},{key:\"convertDate\",value:function convertDate(dates){var date=new Date(dates);var dd=String(date.getDate()).padStart(2,\"0\");var mm=String(date.getMonth()+1).padStart(2,\"0\");//January is 0!\nvar yyyy=date.getFullYear();var today=dd+\"/\"+mm+\"/\"+yyyy;var hours=String(date.getHours()).padStart(2,\"0\");var minutes=String(date.getMinutes()).padStart(2,\"0\");return today+\" (\"+hours+\":\"+minutes+\" hrs)\";}},{key:\"handleClick\",value:function handleClick(e){var _this5=this;e.preventDefault();console.log(e.target.otp.value);this.setState({verifying:true});var id=this.state.ids;axios.post(\"https://prayuj-gamerent.herokuapp.com/customer/verify_otp/\"+id[3],{otp:e.target.otp.value}).then(function(res){console.log(res.data.isVerify);if(res.data.isVerify){axios.post(\"https://prayuj-gamerent.herokuapp.com/customer/return/\",{transaction_id:id[0],game_id:id[1],item_id:id[2]}).then(function(res){console.log(res.data);_this5.getCustomerDetail();_this5.setState({modal_show:false,transactionid:id[0]});_this5.setRedirect();}).catch(function(err){return console.log(err);});}else{_this5.setState({verifying:false});alert(\"Incorrect OTP, Issue again\");}});}},{key:\"onClickForSort\",value:function onClickForSort(e){var _this6=this;if(e.target.value===\"Customer Name\"){var games_to_return=this.state.filtered;games_to_return.sort(function(a,b){var x=a.customerInfo.name.toLowerCase();var y=b.customerInfo.name.toLowerCase();if(_this6.state.ascendingCustomerName){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this6.state.ascendingCustomerName){if(x<y){return-1;}if(x>y){return 1;}return 0;}});console.log(games_to_return);var arrow=this.state.ascendingCustomerName?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:games_to_return,ascendingCustomerName:!this.state.ascendingCustomerName,customerNameSortButtonValue:arrow,gameNameSortButtonValue:\"Sort\",dateIssueButtonValue:\"Sort\"});}if(e.target.value===\"Game Name\"){var _games_to_return=this.state.filtered;_games_to_return.sort(function(a,b){var x=a.gameInfo.name.toLowerCase();var y=b.gameInfo.name.toLowerCase();if(_this6.state.ascendingGameName){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this6.state.ascendingGameName){if(x<y){return-1;}if(x>y){return 1;}return 0;}});console.log(_games_to_return);var _arrow=this.state.ascendingGameName?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:_games_to_return,ascendingGameName:!this.state.ascendingGameName,gameNameSortButtonValue:_arrow,customerNameSortButtonValue:\"Sort\",dateIssueButtonValue:\"Sort\"});}if(e.target.value===\"Date Issue\"){var _games_to_return2=this.state.filtered;_games_to_return2.sort(function(a,b){var x=a.date_issue;var y=b.date_issue;if(_this6.state.ascendingDateIssue){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this6.state.ascendingDateIssue){if(x<y){return-1;}if(x>y){return 1;}return 0;}});var _arrow2=this.state.ascendingDateIssue?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:_games_to_return2,ascendingDateIssue:!this.state.ascendingDateIssue,dateIssueButtonValue:_arrow2,customerNameSortButtonValue:\"Sort\",gameNameSortButtonValue:\"Sort\"});}}},{key:\"render\",value:function render(){var _this7=this;var games=this.state.filtered.length>0?this.state.filtered.map(function(game,index){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,game.customerInfo.name),/*#__PURE__*/React.createElement(\"td\",null,game.gameInfo.name),/*#__PURE__*/React.createElement(\"td\",null,game.gameInfo.items.console),/*#__PURE__*/React.createElement(\"td\",null,game.gameInfo.items.serial_no),/*#__PURE__*/React.createElement(\"td\",null,_this7.convertDate(game.date_issue)),/*#__PURE__*/React.createElement(\"input\",{type:\"button\",value:\"Return\",className:\"btn btn-primary\",onClick:_this7.confirmReturn,id:game._id+\" \"+game.game_id+\" \"+game.item_id+\" \"+game.customer_id+\" \"+game.gameInfo.items.console}));}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\",style:{position:\"relative\",top:\"50%\",left:\"50%\"}},\"Nothing to Show!\"));return/*#__PURE__*/React.createElement(\"div\",null,this.renderRedirect(),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search...\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive-xl\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table\",style:{marginTop:20}},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Sr\"),/*#__PURE__*/React.createElement(\"th\",null,\"Customer Name\",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"Customer Name\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.customerNameSortButtonValue)),/*#__PURE__*/React.createElement(\"th\",null,\"Game Name\",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"Game Name\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.gameNameSortButtonValue)),/*#__PURE__*/React.createElement(\"th\",null,\"Console\"),/*#__PURE__*/React.createElement(\"th\",null,\"Serial No\"),/*#__PURE__*/React.createElement(\"th\",null,\"Issued\",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"Date Issue\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.dateIssueButtonValue)),/*#__PURE__*/React.createElement(\"th\",null,\"Return\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.games_to_return_loaded?games:/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\",style:{position:\"relative\",top:\"50%\",left:\"50%\"}},/*#__PURE__*/React.createElement(LoadingSpinner,null)))),/*#__PURE__*/React.createElement(Modal,{show:this.state.modal_show},/*#__PURE__*/React.createElement(Modal.Header,null,/*#__PURE__*/React.createElement(Modal.Title,null,\"Game Return\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleClick},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",null,\"Enter OTP\",/*#__PURE__*/React.createElement(\"input\",{type:\"number\",name:\"otp\"})),this.state.otp_issued?/*#__PURE__*/React.createElement(Toast,null,/*#__PURE__*/React.createElement(Toast.Header,null,/*#__PURE__*/React.createElement(\"strong\",{className:\"mr-auto\"},\"OTP\")),/*#__PURE__*/React.createElement(Toast.Body,null,this.state.message)):/*#__PURE__*/React.createElement(LoadingSpinner,null)),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:this.modalClose},\"Close\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\"},this.state.verifying?/*#__PURE__*/React.createElement(LoadingSpinner,null):\"Verify\")))))));}}]);return Return;}(Component);export default Return;","map":{"version":3,"sources":["C:/Prayuj Folders/Game-Renting-Service/frontend/src/components/return.js"],"names":["React","Component","axios","Redirect","Modal","Button","Toast","LoadingSpinner","Return","props","setRedirect","setState","redirect_to_transaction","renderRedirect","state","transactionid","console","log","match","params","id","mode","filtered","modal_show","ascendingCustomerName","ascendingGameName","ascendingDateIssue","customerNameSortButtonValue","gameNameSortButtonValue","dateIssueButtonValue","otp_issued","verifying","games_to_return_loaded","handleClick","bind","confirmReturn","modalClose","handleChange","onClickForSort","getCustomerDetail","e","target","ids","split","get","then","res","data","message","games_to_return","show","catch","err","value","currentList","newList","firstList","secondList","filter","item","lc","gameInfo","name","toLowerCase","includes","customerInfo","concat","dates","date","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","today","hours","getHours","minutes","getMinutes","preventDefault","otp","post","isVerify","transaction_id","game_id","item_id","alert","sort","a","b","x","y","arrow","date_issue","games","length","map","game","index","items","serial_no","convertDate","_id","customer_id","position","top","left","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Toast from \"react-bootstrap/Toast\";\r\nimport LoadingSpinner from \"./loadingSpinner\";\r\n\r\nclass Return extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(props.match.params.id);\r\n    if (props.match.params.mode === \"customer\") {\r\n      this.state = {\r\n        mode: \"customer\",\r\n        id: props.match.params.id,\r\n        filtered: [],\r\n        modal_show: false,\r\n        ascendingCustomerName: true,\r\n        ascendingGameName: true,\r\n        ascendingDateIssue: true,\r\n        customerNameSortButtonValue: \"Sort\",\r\n        gameNameSortButtonValue: \"Sort\",\r\n        dateIssueButtonValue: <span>&darr;</span>,\r\n        otp_issued: false,\r\n        verifying: false,\r\n        games_to_return_loaded: false,\r\n      };\r\n    } else {\r\n      this.state = {\r\n        mode: \"dashboard\",\r\n        id: \"all\",\r\n        filtered: [],\r\n        modal_show: false,\r\n        ascendingCustomerName: true,\r\n        ascendingGameName: true,\r\n        ascendingDateIssue: true,\r\n        customerNameSortButtonValue: \"Sort\",\r\n        gameNameSortButtonValue: \"Sort\",\r\n        dateIssueButtonValue: <span>&darr;</span>,\r\n        otp_issued: false,\r\n        verifying: false,\r\n        games_to_return_loaded: false,\r\n      };\r\n    }\r\n\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.confirmReturn = this.confirmReturn.bind(this);\r\n    this.modalClose = this.modalClose.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.onClickForSort = this.onClickForSort.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    this.getCustomerDetail();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    console.log(this.state.mode, this.props.match.params.mode);\r\n    if (this.state.mode !== this.props.match.params.mode) {\r\n      this.setState(\r\n        {\r\n          mode: this.props.match.params.mode,\r\n          id: this.props.match.params.id,\r\n        },\r\n        () => {\r\n          this.getCustomerDetail();\r\n        }\r\n      );\r\n    }\r\n  }\r\n  confirmReturn(e) {\r\n    console.log(e.target.id);\r\n    this.setState({\r\n      otp_issued: false,\r\n      verifying: false,\r\n    });\r\n    let ids = e.target.id.split(\" \");\r\n    axios\r\n      .get(\r\n        \"https://prayuj-gamerent.herokuapp.com/customer/generate_otp/id=\" +\r\n          ids[3] +\r\n          \"&mode=Returning\" +\r\n          \"&game=\" +\r\n          ids[1] +\r\n          \"&console=\" +\r\n          ids[4]\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.setState({ message: res.data.message, otp_issued: true });\r\n      });\r\n    this.setState({\r\n      modal_show: true,\r\n      ids: ids,\r\n    });\r\n  }\r\n\r\n  modalClose() {\r\n    {\r\n      this.setState({ modal_show: false });\r\n    }\r\n  }\r\n  getCustomerDetail() {\r\n    axios\r\n      .get(\r\n        \"https://prayuj-gamerent.herokuapp.com/customer/return/\" + this.state.id\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.setState({\r\n          games_to_return: res.data,\r\n          filtered: res.data,\r\n          show: true,\r\n          games_to_return_loaded: true,\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  handleChange(e) {\r\n    console.log(e.target.value);\r\n    // Variable to hold the original version of the list\r\n    let currentList = [];\r\n    // Variable to hold the filtered list before putting into state\r\n    let newList = [];\r\n\r\n    // If the search bar isn't empty\r\n    if (e.target.value !== \"\") {\r\n      //console.log(\"HERE 1\");\r\n      // Assign the original list to currentList\r\n      currentList = this.state.games_to_return;\r\n      let firstList = [];\r\n      let secondList = [];\r\n\r\n      // Use .filter() to determine which items should be displayed\r\n      // based on the search terms\r\n      firstList = currentList.filter((item) => {\r\n        // change current item to lowercase\r\n        const lc = item.gameInfo.name.toLowerCase();\r\n        // change search term to lowercase\r\n        const filter = e.target.value.toLowerCase();\r\n        // check to see if the current list item includes the search term\r\n        // If it does, it will be added to newList. Using lowercase eliminates\r\n        // issues with capitalization in search terms and search content\r\n        return lc.includes(filter);\r\n      });\r\n      secondList = currentList.filter((item) => {\r\n        // change current item to lowercase\r\n        const lc = item.customerInfo.name.toLowerCase();\r\n        // change search term to lowercase\r\n        const filter = e.target.value.toLowerCase();\r\n        // check to see if the current list item includes the search term\r\n        // If it does, it will be added to newList. Using lowercase eliminates\r\n        // issues with capitalization in search terms and search content\r\n        return lc.includes(filter);\r\n      });\r\n      newList = firstList.concat(secondList);\r\n      //console.log(newList);\r\n    } else {\r\n      //console.log(\"HERE 2\");\r\n      // If the search bar is empty, set newList to original task list\r\n      newList = this.state.filtered;\r\n    }\r\n    console.log(newList);\r\n    // Set the filtered state based on what our rules added to newList\r\n    this.setState({\r\n      filtered: newList,\r\n    });\r\n  }\r\n\r\n  convertDate(dates) {\r\n    var date = new Date(dates);\r\n    var dd = String(date.getDate()).padStart(2, \"0\");\r\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\r\n    var yyyy = date.getFullYear();\r\n    var today = dd + \"/\" + mm + \"/\" + yyyy;\r\n    var hours = String(date.getHours()).padStart(2, \"0\");\r\n    var minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n    return today + \" (\" + hours + \":\" + minutes + \" hrs)\";\r\n  }\r\n\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    console.log(e.target.otp.value);\r\n    this.setState({\r\n      verifying: true,\r\n    });\r\n    let id = this.state.ids;\r\n    axios\r\n      .post(\r\n        \"https://prayuj-gamerent.herokuapp.com/customer/verify_otp/\" + id[3],\r\n        {\r\n          otp: e.target.otp.value,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data.isVerify);\r\n        if (res.data.isVerify) {\r\n          axios\r\n            .post(\"https://prayuj-gamerent.herokuapp.com/customer/return/\", {\r\n              transaction_id: id[0],\r\n              game_id: id[1],\r\n              item_id: id[2],\r\n            })\r\n            .then((res) => {\r\n              console.log(res.data);\r\n              this.getCustomerDetail();\r\n              this.setState({\r\n                modal_show: false,\r\n                transactionid: id[0],\r\n              });\r\n              this.setRedirect();\r\n            })\r\n            .catch((err) => console.log(err));\r\n        } else {\r\n          this.setState({ verifying: false });\r\n          alert(\"Incorrect OTP, Issue again\");\r\n        }\r\n      });\r\n  }\r\n\r\n  onClickForSort(e) {\r\n    if (e.target.value === \"Customer Name\") {\r\n      let games_to_return = this.state.filtered;\r\n      games_to_return.sort((a, b) => {\r\n        var x = a.customerInfo.name.toLowerCase();\r\n        var y = b.customerInfo.name.toLowerCase();\r\n        if (this.state.ascendingCustomerName) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingCustomerName) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      console.log(games_to_return);\r\n      let arrow = this.state.ascendingCustomerName ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: games_to_return,\r\n        ascendingCustomerName: !this.state.ascendingCustomerName,\r\n        customerNameSortButtonValue: arrow,\r\n        gameNameSortButtonValue: \"Sort\",\r\n        dateIssueButtonValue: \"Sort\",\r\n      });\r\n    }\r\n    if (e.target.value === \"Game Name\") {\r\n      let games_to_return = this.state.filtered;\r\n      games_to_return.sort((a, b) => {\r\n        var x = a.gameInfo.name.toLowerCase();\r\n        var y = b.gameInfo.name.toLowerCase();\r\n        if (this.state.ascendingGameName) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingGameName) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      console.log(games_to_return);\r\n      let arrow = this.state.ascendingGameName ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: games_to_return,\r\n        ascendingGameName: !this.state.ascendingGameName,\r\n        gameNameSortButtonValue: arrow,\r\n        customerNameSortButtonValue: \"Sort\",\r\n        dateIssueButtonValue: \"Sort\",\r\n      });\r\n    }\r\n    if (e.target.value === \"Date Issue\") {\r\n      let games_to_return = this.state.filtered;\r\n      games_to_return.sort((a, b) => {\r\n        var x = a.date_issue;\r\n        var y = b.date_issue;\r\n        if (this.state.ascendingDateIssue) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingDateIssue) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      let arrow = this.state.ascendingDateIssue ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: games_to_return,\r\n        ascendingDateIssue: !this.state.ascendingDateIssue,\r\n        dateIssueButtonValue: arrow,\r\n        customerNameSortButtonValue: \"Sort\",\r\n        gameNameSortButtonValue: \"Sort\",\r\n      });\r\n    }\r\n  }\r\n\r\n  setRedirect = () => {\r\n    this.setState({\r\n      redirect_to_transaction: true,\r\n    });\r\n  };\r\n\r\n  renderRedirect = () => {\r\n    if (this.state.redirect_to_transaction) {\r\n      return <Redirect push to={\"/transaction/\" + this.state.transactionid} />;\r\n    }\r\n  };\r\n  render() {\r\n    let games =\r\n      this.state.filtered.length > 0 ? (\r\n        this.state.filtered.map((game, index) => (\r\n          <tr>\r\n            <td>{index + 1}</td>\r\n            <td>{game.customerInfo.name}</td>\r\n            <td>{game.gameInfo.name}</td>\r\n            <td>{game.gameInfo.items.console}</td>\r\n            <td>{game.gameInfo.items.serial_no}</td>\r\n            <td>{this.convertDate(game.date_issue)}</td>\r\n            <input\r\n              type=\"button\"\r\n              value=\"Return\"\r\n              className=\"btn btn-primary\"\r\n              onClick={this.confirmReturn}\r\n              id={\r\n                game._id +\r\n                \" \" +\r\n                game.game_id +\r\n                \" \" +\r\n                game.item_id +\r\n                \" \" +\r\n                game.customer_id +\r\n                \" \" +\r\n                game.gameInfo.items.console\r\n              }\r\n            />\r\n          </tr>\r\n        ))\r\n      ) : (\r\n        <tr>\r\n          <td\r\n            colSpan=\"7\"\r\n            style={{ position: \"relative\", top: \"50%\", left: \"50%\" }}\r\n          >\r\n            Nothing to Show!\r\n          </td>\r\n        </tr>\r\n      );\r\n    return (\r\n      <div>\r\n        {this.renderRedirect()}\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          placeholder=\"Search...\"\r\n          onChange={this.handleChange}\r\n        />\r\n        <div className=\"table-responsive-xl\">\r\n          <table className=\"table\" style={{ marginTop: 20 }}>\r\n            <thead>\r\n              <tr>\r\n                <th>Sr</th>\r\n                <th>\r\n                  Customer Name\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    value=\"Customer Name\"\r\n                    onClick={this.onClickForSort}\r\n                    style={{ \"margin-left\": \"5%\" }}\r\n                  >\r\n                    {this.state.customerNameSortButtonValue}\r\n                  </button>\r\n                </th>\r\n                <th>\r\n                  Game Name\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    value=\"Game Name\"\r\n                    onClick={this.onClickForSort}\r\n                    style={{ \"margin-left\": \"5%\" }}\r\n                  >\r\n                    {this.state.gameNameSortButtonValue}\r\n                  </button>\r\n                </th>\r\n                <th>Console</th>\r\n                <th>Serial No</th>\r\n                <th>\r\n                  Issued\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    value=\"Date Issue\"\r\n                    onClick={this.onClickForSort}\r\n                    style={{ \"margin-left\": \"5%\" }}\r\n                  >\r\n                    {this.state.dateIssueButtonValue}\r\n                  </button>\r\n                </th>\r\n                <th>Return</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.games_to_return_loaded ? (\r\n                games\r\n              ) : (\r\n                <tr>\r\n                  <td\r\n                    colSpan=\"7\"\r\n                    style={{ position: \"relative\", top: \"50%\", left: \"50%\" }}\r\n                  >\r\n                    <LoadingSpinner></LoadingSpinner>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n\r\n            <Modal show={this.state.modal_show}>\r\n              <Modal.Header>\r\n                <Modal.Title>Game Return</Modal.Title>\r\n              </Modal.Header>\r\n              <form onSubmit={this.handleClick}>\r\n                <Modal.Body>\r\n                  <div>\r\n                    Enter OTP\r\n                    <input type=\"number\" name=\"otp\" />\r\n                  </div>\r\n                  {this.state.otp_issued ? (\r\n                    <Toast>\r\n                      <Toast.Header>\r\n                        <strong className=\"mr-auto\">OTP</strong>\r\n                      </Toast.Header>\r\n                      <Toast.Body>{this.state.message}</Toast.Body>\r\n                    </Toast>\r\n                  ) : (\r\n                    <LoadingSpinner></LoadingSpinner>\r\n                  )}\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                  <Button variant=\"secondary\" onClick={this.modalClose}>\r\n                    Close\r\n                  </Button>\r\n                  <Button variant=\"primary\" type=\"submit\">\r\n                    {this.state.verifying ? (\r\n                      <LoadingSpinner></LoadingSpinner>\r\n                    ) : (\r\n                      \"Verify\"\r\n                    )}\r\n                  </Button>\r\n                </Modal.Footer>\r\n              </form>\r\n            </Modal>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Return;\r\n"]},"metadata":{},"sourceType":"module"}