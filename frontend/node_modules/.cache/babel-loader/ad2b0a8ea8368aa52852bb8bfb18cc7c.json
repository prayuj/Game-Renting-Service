{"ast":null,"code":"import _classCallCheck from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Prayuj Folders\\\\Game-Renting-Service\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Customer from\"./customer\";import axios from\"axios\";import{Redirect}from\"react-router-dom\";var Customers=/*#__PURE__*/function(_Component){_inherits(Customers,_Component);var _super=_createSuper(Customers);function Customers(props){var _this;_classCallCheck(this,Customers);_this=_super.call(this,props);_this.setRedirect=function(){_this.setState({redirect:true});};_this.renderRedirect=function(){if(_this.state.redirect){return/*#__PURE__*/React.createElement(Redirect,{push:true,to:\"/add_customer/\"});}};_this.state={customers:[],search:\"\",filtered:[],ascendingName:true,ascendingDOJ:true,ascendingMembershipEnd:true,ascendingNoOfGames:true,nameSortButtonValue:\"Sort\",DOJSortButtonValue:\"Sort\",membershipEndSortButtonValue:/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"),noOfGamesSortButtonValue:\"Sort\"};_this.getCustomers=_this.getCustomers.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.onClickForSort=_this.onClickForSort.bind(_assertThisInitialized(_this));return _this;}_createClass(Customers,[{key:\"componentDidMount\",value:function componentDidMount(){this.getCustomers();}},{key:\"getCustomers\",value:function getCustomers(){var _this2=this;axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/\").then(function(res){_this2.setState({customers:res.data,filtered:res.data});});}},{key:\"convertDate\",value:function convertDate(dates){var date=new Date(dates);var dd=String(date.getDate()).padStart(2,\"0\");var mm=String(date.getMonth()+1).padStart(2,\"0\");//January is 0!\nvar yyyy=date.getFullYear();var today=dd+\"/\"+mm+\"/\"+yyyy;return today;}},{key:\"handleChange\",value:function handleChange(e){// Variable to hold the original version of the list\nvar currentList=[];// Variable to hold the filtered list before putting into state\nvar newList=[];// If the search bar isn't empty\nif(e.target.value!==\"\"){//console.log(\"HERE 1\");\n// Assign the original list to currentList\ncurrentList=this.state.customers;var firstList=[];var secondList=[];// Use .filter() to determine which items should be displayed\n// based on the search terms\nfirstList=currentList.filter(function(customer){// change current item to lowercase\nvar lc=customer.name.toLowerCase();// change search term to lowercase\nvar filter=e.target.value.toLowerCase();// check to see if the current list item includes the search term\n// If it does, it will be added to newList. Using lowercase eliminates\n// issues with capitalization in search terms and search content\nreturn lc.includes(filter);});secondList=currentList.filter(function(customer){// change current item to lowercase\nvar lc=customer.name.toLowerCase();// change search term to lowercase\nvar filter=e.target.value.toLowerCase();// check to see if the current list item includes the search term\n// If it does, it will be added to newList. Using lowercase eliminates\n// issues with capitalization in search terms and search content\nreturn lc.includes(filter);});for(var i=0;i<secondList.length;i++){var flag=true;for(var j=0;j<firstList.length;j++){if(JSON.stringify(secondList[i])===JSON.stringify(firstList[j]))flag=false;}if(flag)firstList.push(secondList[i]);}newList=firstList;//console.log(newList);\n}else{console.log(\"HERE 2\");// If the search bar is empty, set newList to original task list\nnewList=this.state.customers;}// Set the filtered state based on what our rules added to newList\nthis.setState({filtered:newList});}},{key:\"onClickForSort\",value:function onClickForSort(e){var _this3=this;console.log(e.target.value);if(e.target.value===\"Name\"){var customers=this.state.filtered;customers.sort(function(a,b){var x=a.name.toLowerCase();var y=b.name.toLowerCase();if(_this3.state.ascendingName){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this3.state.ascendingName){if(x<y){return-1;}if(x>y){return 1;}return 0;}});console.log(customers);var arrow=this.state.ascendingName?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:customers,ascendingName:!this.state.ascendingName,nameSortButtonValue:arrow,DOJSortButtonValue:\"Sort\",membershipEndSortButtonValue:\"Sort\",noOfGamesSortButtonValue:\"Sort\"});}if(e.target.value===\"DOJ\"){var _customers=this.state.filtered;_customers.sort(function(a,b){var x=a.dateOfJoin;var y=b.dateOfJoin;if(_this3.state.ascendingDOJ){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this3.state.ascendingDOJ){if(x<y){return-1;}if(x>y){return 1;}return 0;}});console.log(_customers);var _arrow=this.state.ascendingDOJ?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:_customers,ascendingDOJ:!this.state.ascendingDOJ,DOJSortButtonValue:_arrow,nameSortButtonValue:\"Sort\",membershipEndSortButtonValue:\"Sort\",noOfGamesSortButtonValue:\"Sort\"});}if(e.target.value===\"Membership\"){var _customers2=this.state.filtered;_customers2.sort(function(a,b){var x=a.latestMembership.end;var y=b.latestMembership.end;if(_this3.state.ascendingMembershipEnd){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this3.state.ascendingMembershipEnd){if(x<y){return-1;}if(x>y){return 1;}return 0;}});console.log(_customers2);var _arrow2=this.state.ascendingMembershipEnd?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:_customers2,ascendingMembershipEnd:!this.state.ascendingMembershipEnd,membershipEndSortButtonValue:_arrow2,nameSortButtonValue:\"Sort\",DOJSortButtonValue:\"Sort\",noOfGamesSortButtonValue:\"Sort\"});}if(e.target.value===\"No Of Games\"){var _customers3=this.state.filtered;_customers3.sort(function(a,b){var x=a.noOfGames;var y=b.noOfGames;if(_this3.state.ascendingNoOfGames){if(x<y){return 1;}if(x>y){return-1;}return 0;}if(!_this3.state.ascendingNoOfGames){if(x<y){return-1;}if(x>y){return 1;}return 0;}});console.log(_customers3);var _arrow3=this.state.ascendingNoOfGames?/*#__PURE__*/React.createElement(\"span\",null,\"\\u2193\"):/*#__PURE__*/React.createElement(\"span\",null,\"\\u2191\");this.setState({filtered:_customers3,ascendingNoOfGames:!this.state.ascendingNoOfGames,noOfGamesSortButtonValue:_arrow3,nameSortButtonValue:\"Sort\",DOJSortButtonValue:\"Sort\",membershipEndSortButtonValue:\"Sort\"});}}},{key:\"render\",value:function render(){var _this4=this;console.log(this.state.filtered);return/*#__PURE__*/React.createElement(\"div\",null,this.renderRedirect(),/*#__PURE__*/React.createElement(\"input\",{type:\"button\",className:\"btn btn-primary\",value:\"Add Customer\",onClick:this.setRedirect}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search...\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"table\",{className:\"table\",style:{marginTop:20}},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:{paddingBottom:\"1.3%\"}},\"Sr\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"Name\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.nameSortButtonValue)),/*#__PURE__*/React.createElement(\"th\",{style:{paddingBottom:\"1.3%\"}},\"Email-ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date Of Joining\",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"DOJ\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.DOJSortButtonValue)),/*#__PURE__*/React.createElement(\"th\",null,\"Membership Expiry\",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"Membership\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.membershipEndSortButtonValue)),/*#__PURE__*/React.createElement(\"th\",null,\"NoOfGames\",/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",value:\"No Of Games\",onClick:this.onClickForSort,style:{\"margin-left\":\"5%\"}},this.state.noOfGamesSortButtonValue)))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.filtered.map(function(filter,index){return/*#__PURE__*/React.createElement(Customer,{mode:\"customers\",id:filter._id,sr:index+1,name:filter.name,email:filter.email,noOfGames:filter.noOfGames,dateOfJoin:_this4.convertDate(filter.dateOfJoin),dateOfMembershipEnd:filter.latestMembership.active?_this4.convertDate(filter.latestMembership.end):\"Expired Membership\"});}))));}}]);return Customers;}(Component);export default Customers;","map":{"version":3,"sources":["C:/Prayuj Folders/Game-Renting-Service/frontend/src/components/customers.js"],"names":["React","Component","Customer","axios","Redirect","Customers","props","setRedirect","setState","redirect","renderRedirect","state","customers","search","filtered","ascendingName","ascendingDOJ","ascendingMembershipEnd","ascendingNoOfGames","nameSortButtonValue","DOJSortButtonValue","membershipEndSortButtonValue","noOfGamesSortButtonValue","getCustomers","bind","handleChange","onClickForSort","get","then","res","data","dates","date","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","today","e","currentList","newList","target","value","firstList","secondList","filter","customer","lc","name","toLowerCase","includes","i","length","flag","j","JSON","stringify","push","console","log","sort","a","b","x","y","arrow","dateOfJoin","latestMembership","end","noOfGames","marginTop","paddingBottom","map","index","_id","email","convertDate","active"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Customer from \"./customer\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass Customers extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      customers: [],\r\n      search: \"\",\r\n      filtered: [],\r\n      ascendingName: true,\r\n      ascendingDOJ: true,\r\n      ascendingMembershipEnd: true,\r\n      ascendingNoOfGames: true,\r\n      nameSortButtonValue: \"Sort\",\r\n      DOJSortButtonValue: \"Sort\",\r\n      membershipEndSortButtonValue: <span>&darr;</span>,\r\n      noOfGamesSortButtonValue: \"Sort\",\r\n    };\r\n    this.getCustomers = this.getCustomers.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.onClickForSort = this.onClickForSort.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCustomers();\r\n  }\r\n\r\n  getCustomers() {\r\n    axios.get(\"https://prayuj-gamerent.herokuapp.com/customer/\").then((res) => {\r\n      this.setState({\r\n        customers: res.data,\r\n        filtered: res.data,\r\n      });\r\n    });\r\n  }\r\n\r\n  convertDate(dates) {\r\n    var date = new Date(dates);\r\n    var dd = String(date.getDate()).padStart(2, \"0\");\r\n    var mm = String(date.getMonth() + 1).padStart(2, \"0\"); //January is 0!\r\n    var yyyy = date.getFullYear();\r\n    var today = dd + \"/\" + mm + \"/\" + yyyy;\r\n    return today;\r\n  }\r\n\r\n  setRedirect = () => {\r\n    this.setState({\r\n      redirect: true,\r\n    });\r\n  };\r\n\r\n  renderRedirect = () => {\r\n    if (this.state.redirect) {\r\n      return <Redirect push to={\"/add_customer/\"} />;\r\n    }\r\n  };\r\n\r\n  handleChange(e) {\r\n    // Variable to hold the original version of the list\r\n    let currentList = [];\r\n    // Variable to hold the filtered list before putting into state\r\n    let newList = [];\r\n\r\n    // If the search bar isn't empty\r\n    if (e.target.value !== \"\") {\r\n      //console.log(\"HERE 1\");\r\n      // Assign the original list to currentList\r\n      currentList = this.state.customers;\r\n      let firstList = [];\r\n      let secondList = [];\r\n\r\n      // Use .filter() to determine which items should be displayed\r\n      // based on the search terms\r\n      firstList = currentList.filter((customer) => {\r\n        // change current item to lowercase\r\n        const lc = customer.name.toLowerCase();\r\n        // change search term to lowercase\r\n        const filter = e.target.value.toLowerCase();\r\n        // check to see if the current list item includes the search term\r\n        // If it does, it will be added to newList. Using lowercase eliminates\r\n        // issues with capitalization in search terms and search content\r\n        return lc.includes(filter);\r\n      });\r\n      secondList = currentList.filter((customer) => {\r\n        // change current item to lowercase\r\n        const lc = customer.name.toLowerCase();\r\n        // change search term to lowercase\r\n        const filter = e.target.value.toLowerCase();\r\n        // check to see if the current list item includes the search term\r\n        // If it does, it will be added to newList. Using lowercase eliminates\r\n        // issues with capitalization in search terms and search content\r\n        return lc.includes(filter);\r\n      });\r\n      for (let i = 0; i < secondList.length; i++) {\r\n        let flag = true;\r\n        for (let j = 0; j < firstList.length; j++) {\r\n          if (JSON.stringify(secondList[i]) === JSON.stringify(firstList[j]))\r\n            flag = false;\r\n        }\r\n        if (flag) firstList.push(secondList[i]);\r\n      }\r\n      newList = firstList;\r\n      //console.log(newList);\r\n    } else {\r\n      console.log(\"HERE 2\");\r\n      // If the search bar is empty, set newList to original task list\r\n      newList = this.state.customers;\r\n    }\r\n    // Set the filtered state based on what our rules added to newList\r\n    this.setState({\r\n      filtered: newList,\r\n    });\r\n  }\r\n\r\n  onClickForSort(e) {\r\n    console.log(e.target.value);\r\n    if (e.target.value === \"Name\") {\r\n      let customers = this.state.filtered;\r\n      customers.sort((a, b) => {\r\n        var x = a.name.toLowerCase();\r\n        var y = b.name.toLowerCase();\r\n        if (this.state.ascendingName) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingName) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      console.log(customers);\r\n      let arrow = this.state.ascendingName ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: customers,\r\n        ascendingName: !this.state.ascendingName,\r\n        nameSortButtonValue: arrow,\r\n        DOJSortButtonValue: \"Sort\",\r\n        membershipEndSortButtonValue: \"Sort\",\r\n        noOfGamesSortButtonValue: \"Sort\",\r\n      });\r\n    }\r\n    if (e.target.value === \"DOJ\") {\r\n      let customers = this.state.filtered;\r\n      customers.sort((a, b) => {\r\n        var x = a.dateOfJoin;\r\n        var y = b.dateOfJoin;\r\n        if (this.state.ascendingDOJ) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingDOJ) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      console.log(customers);\r\n      let arrow = this.state.ascendingDOJ ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: customers,\r\n        ascendingDOJ: !this.state.ascendingDOJ,\r\n        DOJSortButtonValue: arrow,\r\n        nameSortButtonValue: \"Sort\",\r\n        membershipEndSortButtonValue: \"Sort\",\r\n        noOfGamesSortButtonValue: \"Sort\",\r\n      });\r\n    }\r\n    if (e.target.value === \"Membership\") {\r\n      let customers = this.state.filtered;\r\n      customers.sort((a, b) => {\r\n        var x = a.latestMembership.end;\r\n        var y = b.latestMembership.end;\r\n        if (this.state.ascendingMembershipEnd) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingMembershipEnd) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      console.log(customers);\r\n      let arrow = this.state.ascendingMembershipEnd ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: customers,\r\n        ascendingMembershipEnd: !this.state.ascendingMembershipEnd,\r\n        membershipEndSortButtonValue: arrow,\r\n        nameSortButtonValue: \"Sort\",\r\n        DOJSortButtonValue: \"Sort\",\r\n        noOfGamesSortButtonValue: \"Sort\",\r\n      });\r\n    }\r\n    if (e.target.value === \"No Of Games\") {\r\n      let customers = this.state.filtered;\r\n      customers.sort((a, b) => {\r\n        var x = a.noOfGames;\r\n        var y = b.noOfGames;\r\n        if (this.state.ascendingNoOfGames) {\r\n          if (x < y) {\r\n            return 1;\r\n          }\r\n          if (x > y) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (!this.state.ascendingNoOfGames) {\r\n          if (x < y) {\r\n            return -1;\r\n          }\r\n          if (x > y) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      });\r\n      console.log(customers);\r\n      let arrow = this.state.ascendingNoOfGames ? (\r\n        <span>&darr;</span>\r\n      ) : (\r\n        <span>&uarr;</span>\r\n      );\r\n      this.setState({\r\n        filtered: customers,\r\n        ascendingNoOfGames: !this.state.ascendingNoOfGames,\r\n        noOfGamesSortButtonValue: arrow,\r\n        nameSortButtonValue: \"Sort\",\r\n        DOJSortButtonValue: \"Sort\",\r\n        membershipEndSortButtonValue: \"Sort\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    console.log(this.state.filtered);\r\n    return (\r\n      <div>\r\n        {this.renderRedirect()}\r\n        <input\r\n          type=\"button\"\r\n          className=\"btn btn-primary\"\r\n          value=\"Add Customer\"\r\n          onClick={this.setRedirect}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          placeholder=\"Search...\"\r\n          onChange={this.handleChange}\r\n        />\r\n        <table className=\"table\" style={{ marginTop: 20 }}>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ paddingBottom: \"1.3%\" }}>Sr</th>\r\n              <th>\r\n                Name\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  value=\"Name\"\r\n                  onClick={this.onClickForSort}\r\n                  style={{ \"margin-left\": \"5%\" }}\r\n                >\r\n                  {this.state.nameSortButtonValue}\r\n                </button>\r\n              </th>\r\n              <th style={{ paddingBottom: \"1.3%\" }}>Email-ID</th>\r\n              <th>\r\n                Date Of Joining\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  value=\"DOJ\"\r\n                  onClick={this.onClickForSort}\r\n                  style={{ \"margin-left\": \"5%\" }}\r\n                >\r\n                  {this.state.DOJSortButtonValue}\r\n                </button>\r\n              </th>\r\n              <th>\r\n                Membership Expiry\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  value=\"Membership\"\r\n                  onClick={this.onClickForSort}\r\n                  style={{ \"margin-left\": \"5%\" }}\r\n                >\r\n                  {this.state.membershipEndSortButtonValue}\r\n                </button>\r\n              </th>\r\n\r\n              <th>\r\n                NoOfGames\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  value=\"No Of Games\"\r\n                  onClick={this.onClickForSort}\r\n                  style={{ \"margin-left\": \"5%\" }}\r\n                >\r\n                  {this.state.noOfGamesSortButtonValue}\r\n                </button>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.filtered.map((filter, index) => (\r\n              <Customer\r\n                mode=\"customers\"\r\n                id={filter._id}\r\n                sr={index + 1}\r\n                name={filter.name}\r\n                email={filter.email}\r\n                noOfGames={filter.noOfGames}\r\n                dateOfJoin={this.convertDate(filter.dateOfJoin)}\r\n                dateOfMembershipEnd={\r\n                  filter.latestMembership.active\r\n                    ? this.convertDate(filter.latestMembership.end)\r\n                    : \"Expired Membership\"\r\n                }\r\n              />\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Customers;\r\n"]},"metadata":{},"sourceType":"module"}